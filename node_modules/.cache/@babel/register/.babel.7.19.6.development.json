{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"dotenv/config\");\nvar _config2 = _interopRequireDefault(require(\"./config/config\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _compression = _interopRequireDefault(require(\"compression\"));\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\nvar _helmet = _interopRequireDefault(require(\"helmet\"));\nvar _middleware = _interopRequireDefault(require(\"./helpers/middleware\"));\nvar _initModels = _interopRequireWildcard(require(\"./models/init-models\"));\nvar _IndexRoute = _interopRequireDefault(require(\"./routes/IndexRoute\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n// 1. pastikan selalu import dotenv di line pertama\n\n//for access models to db\n\n// declare port\nconst port = process.env.PORT || 3000;\nconst app = (0, _express.default)();\n// parse body params and attache them to req.body\napp.use(_express.default.json());\napp.use(_express.default.urlencoded({\n  extended: true\n}));\napp.use((0, _cookieParser.default)());\n// use helmet spy bisa dikenali SEO\napp.use((0, _helmet.default)());\n// secure apps by setting various HTTP headers\napp.use((0, _compression.default)());\n// enable CORS - Cross Origin Resource Sharing\napp.use((0, _cors.default)());\n\n// load models dan simpan di req.context\napp.use(async (req, res, next) => {\n  req.context = {\n    models: _initModels.default\n  };\n  next();\n});\n\n//auth.setMiddleware(app);\n\n// call routes\n\napp.use(_config2.default.URL_API + \"/auth\", _IndexRoute.default.UserRoute);\n// app.use(config.URL_API + \"/placement\", routes.PlacementRoute);\n// app.use(config.URL_API + \"/batch\", routes.BatchRoute);\n// app.use(config.URL_API + \"/talent\", routes.TalentRoute);\n// app.use(config.URL_API + \"/instructor\", routes.InstructorRoute);\n// app.use(config.URL_API + \"/curriculum\", routes.CurriculumRoute);\n// app.use(config.URL_API + \"/curriculum_materi\", routes.CurriculumMateriRoute);\n// app.use(config.URL_API + \"/curriculum_reviews\", routes.CurriculumReviewsRoute);\n// app.use(config.URL_API + \"/jobs\", routes.JobRoute);\n// app.use(config.URL_API + \"/bootcamp\", routes.BootcampRoute);\n// app.use(config.URL_API + \"/processbootcamp\", routes.ProcessBootCampRoute);\n// app.use(config.URL_API + \"/batchs\", routes.BatchesRoute);\n// app.use(config.URL_API + \"/settings\", routes.SettingRoute);\n// app.use(config.URL_API + \"/talenttimeline\", routes.TaleTimelineRoute);\n// app.use(config.URL_API + \"/hiring\", routes.HiringRoute);\n// app.use(config.URL_API + \"/client\", routes.ClientRoute);\n// app.use(config.URL_API + \"/hiringg\", routes.Hiring2Route);\n\n// app.use(config.URL_IMAGE + \"/\", routes.ImageRoute);\n\n//use middleware to handle error from others modules\napp.use(_middleware.default.handleError);\napp.use(_middleware.default.notFound);\n\n// set to false agar tidak di drop tables yang ada didatabase\nconst dropDatabaseSync = false;\n_initModels.sequelize.sync({\n  force: dropDatabaseSync\n}).then(async () => {\n  if (dropDatabaseSync) {\n    console.log(\"Database do not drop\");\n  }\n  app.listen(port, () => {\n    console.log(`Server is listening on port ${port}`);\n  });\n});\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJhcHAiLCJleHByZXNzIiwidXNlIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImNvb2tpZVBhcnNlciIsImhlbG1ldCIsImNvbXByZXNzIiwiY29ycyIsInJlcSIsInJlcyIsIm5leHQiLCJjb250ZXh0IiwibW9kZWxzIiwiY29uZmlnIiwiVVJMX0FQSSIsInJvdXRlcyIsIlVzZXJSb3V0ZSIsIm1pZGRsZXdhcmUiLCJoYW5kbGVFcnJvciIsIm5vdEZvdW5kIiwiZHJvcERhdGFiYXNlU3luYyIsInNlcXVlbGl6ZSIsInN5bmMiLCJmb3JjZSIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGFmaXRyXFxPbmVEcml2ZVxcRG9jdW1lbnRzXFx0ZXN0bm9kZWpzXFxzZXJ2ZXJcXCIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gMS4gcGFzdGlrYW4gc2VsYWx1IGltcG9ydCBkb3RlbnYgZGkgbGluZSBwZXJ0YW1hXHJcbmltcG9ydCBcImRvdGVudi9jb25maWdcIjtcclxuaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9jb25maWcvY29uZmlnXCI7XHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XHJcbmltcG9ydCBjb21wcmVzcyBmcm9tIFwiY29tcHJlc3Npb25cIjtcclxuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tIFwiY29va2llLXBhcnNlclwiO1xyXG5pbXBvcnQgaGVsbWV0IGZyb20gXCJoZWxtZXRcIjtcclxuaW1wb3J0IG1pZGRsZXdhcmUgZnJvbSBcIi4vaGVscGVycy9taWRkbGV3YXJlXCI7XHJcblxyXG4vL2ZvciBhY2Nlc3MgbW9kZWxzIHRvIGRiXHJcbmltcG9ydCBtb2RlbHMsIHsgc2VxdWVsaXplIH0gZnJvbSBcIi4vbW9kZWxzL2luaXQtbW9kZWxzXCI7XHJcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4vcm91dGVzL0luZGV4Um91dGVcIjtcclxuXHJcbi8vIGRlY2xhcmUgcG9ydFxyXG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG4vLyBwYXJzZSBib2R5IHBhcmFtcyBhbmQgYXR0YWNoZSB0aGVtIHRvIHJlcS5ib2R5XHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcclxuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XHJcbi8vIHVzZSBoZWxtZXQgc3B5IGJpc2EgZGlrZW5hbGkgU0VPXHJcbmFwcC51c2UoaGVsbWV0KCkpO1xyXG4vLyBzZWN1cmUgYXBwcyBieSBzZXR0aW5nIHZhcmlvdXMgSFRUUCBoZWFkZXJzXHJcbmFwcC51c2UoY29tcHJlc3MoKSk7XHJcbi8vIGVuYWJsZSBDT1JTIC0gQ3Jvc3MgT3JpZ2luIFJlc291cmNlIFNoYXJpbmdcclxuYXBwLnVzZShjb3JzKCkpO1xyXG5cclxuLy8gbG9hZCBtb2RlbHMgZGFuIHNpbXBhbiBkaSByZXEuY29udGV4dFxyXG5hcHAudXNlKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHJlcS5jb250ZXh0ID0geyBtb2RlbHMgfTtcclxuICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuLy9hdXRoLnNldE1pZGRsZXdhcmUoYXBwKTtcclxuXHJcbi8vIGNhbGwgcm91dGVzXHJcblxyXG5hcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvYXV0aFwiLCByb3V0ZXMuVXNlclJvdXRlKTtcclxuLy8gYXBwLnVzZShjb25maWcuVVJMX0FQSSArIFwiL3BsYWNlbWVudFwiLCByb3V0ZXMuUGxhY2VtZW50Um91dGUpO1xyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvYmF0Y2hcIiwgcm91dGVzLkJhdGNoUm91dGUpO1xyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvdGFsZW50XCIsIHJvdXRlcy5UYWxlbnRSb3V0ZSk7XHJcbi8vIGFwcC51c2UoY29uZmlnLlVSTF9BUEkgKyBcIi9pbnN0cnVjdG9yXCIsIHJvdXRlcy5JbnN0cnVjdG9yUm91dGUpO1xyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvY3VycmljdWx1bVwiLCByb3V0ZXMuQ3VycmljdWx1bVJvdXRlKTtcclxuLy8gYXBwLnVzZShjb25maWcuVVJMX0FQSSArIFwiL2N1cnJpY3VsdW1fbWF0ZXJpXCIsIHJvdXRlcy5DdXJyaWN1bHVtTWF0ZXJpUm91dGUpO1xyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvY3VycmljdWx1bV9yZXZpZXdzXCIsIHJvdXRlcy5DdXJyaWN1bHVtUmV2aWV3c1JvdXRlKTtcclxuLy8gYXBwLnVzZShjb25maWcuVVJMX0FQSSArIFwiL2pvYnNcIiwgcm91dGVzLkpvYlJvdXRlKTtcclxuLy8gYXBwLnVzZShjb25maWcuVVJMX0FQSSArIFwiL2Jvb3RjYW1wXCIsIHJvdXRlcy5Cb290Y2FtcFJvdXRlKTtcclxuLy8gYXBwLnVzZShjb25maWcuVVJMX0FQSSArIFwiL3Byb2Nlc3Nib290Y2FtcFwiLCByb3V0ZXMuUHJvY2Vzc0Jvb3RDYW1wUm91dGUpO1xyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvYmF0Y2hzXCIsIHJvdXRlcy5CYXRjaGVzUm91dGUpO1xyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvc2V0dGluZ3NcIiwgcm91dGVzLlNldHRpbmdSb3V0ZSk7XHJcbi8vIGFwcC51c2UoY29uZmlnLlVSTF9BUEkgKyBcIi90YWxlbnR0aW1lbGluZVwiLCByb3V0ZXMuVGFsZVRpbWVsaW5lUm91dGUpO1xyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfQVBJICsgXCIvaGlyaW5nXCIsIHJvdXRlcy5IaXJpbmdSb3V0ZSk7XHJcbi8vIGFwcC51c2UoY29uZmlnLlVSTF9BUEkgKyBcIi9jbGllbnRcIiwgcm91dGVzLkNsaWVudFJvdXRlKTtcclxuLy8gYXBwLnVzZShjb25maWcuVVJMX0FQSSArIFwiL2hpcmluZ2dcIiwgcm91dGVzLkhpcmluZzJSb3V0ZSk7XHJcblxyXG4vLyBhcHAudXNlKGNvbmZpZy5VUkxfSU1BR0UgKyBcIi9cIiwgcm91dGVzLkltYWdlUm91dGUpO1xyXG5cclxuXHJcbi8vdXNlIG1pZGRsZXdhcmUgdG8gaGFuZGxlIGVycm9yIGZyb20gb3RoZXJzIG1vZHVsZXNcclxuYXBwLnVzZShtaWRkbGV3YXJlLmhhbmRsZUVycm9yKTtcclxuYXBwLnVzZShtaWRkbGV3YXJlLm5vdEZvdW5kKTtcclxuXHJcbi8vIHNldCB0byBmYWxzZSBhZ2FyIHRpZGFrIGRpIGRyb3AgdGFibGVzIHlhbmcgYWRhIGRpZGF0YWJhc2VcclxuY29uc3QgZHJvcERhdGFiYXNlU3luYyA9IGZhbHNlO1xyXG5cclxuc2VxdWVsaXplLnN5bmMoeyBmb3JjZTogZHJvcERhdGFiYXNlU3luYyB9KS50aGVuKGFzeW5jICgpID0+IHtcclxuICBpZiAoZHJvcERhdGFiYXNlU3luYykge1xyXG4gICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSBkbyBub3QgZHJvcFwiKTtcclxuICB9XHJcblxyXG4gIGFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFNlcnZlciBpcyBsaXN0ZW5pbmcgb24gcG9ydCAke3BvcnR9YCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBeUM7QUFBQTtBQUFBO0FBWnpDOztBQVVBOztBQUlBO0FBQ0EsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxJQUFJLElBQUk7QUFFckMsTUFBTUMsR0FBRyxHQUFHLElBQUFDLGdCQUFPLEdBQUU7QUFDckI7QUFDQUQsR0FBRyxDQUFDRSxHQUFHLENBQUNELGdCQUFPLENBQUNFLElBQUksRUFBRSxDQUFDO0FBQ3ZCSCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0QsZ0JBQU8sQ0FBQ0csVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFLLENBQUMsQ0FBQyxDQUFDO0FBQy9DTCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxJQUFBSSxxQkFBWSxHQUFFLENBQUM7QUFDdkI7QUFDQU4sR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUssZUFBTSxHQUFFLENBQUM7QUFDakI7QUFDQVAsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQU0sb0JBQVEsR0FBRSxDQUFDO0FBQ25CO0FBQ0FSLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLElBQUFPLGFBQUksR0FBRSxDQUFDOztBQUVmO0FBQ0FULEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLE9BQU9RLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDaENGLEdBQUcsQ0FBQ0csT0FBTyxHQUFHO0lBQUVDLE1BQU0sRUFBTkE7RUFBTyxDQUFDO0VBQ3hCRixJQUFJLEVBQUU7QUFDUixDQUFDLENBQUM7O0FBRUY7O0FBRUE7O0FBRUFaLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDYSxnQkFBTSxDQUFDQyxPQUFPLEdBQUcsT0FBTyxFQUFFQyxtQkFBTSxDQUFDQyxTQUFTLENBQUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBR0E7QUFDQWxCLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDaUIsbUJBQVUsQ0FBQ0MsV0FBVyxDQUFDO0FBQy9CcEIsR0FBRyxDQUFDRSxHQUFHLENBQUNpQixtQkFBVSxDQUFDRSxRQUFRLENBQUM7O0FBRTVCO0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcsS0FBSztBQUU5QkMscUJBQVMsQ0FBQ0MsSUFBSSxDQUFDO0VBQUVDLEtBQUssRUFBRUg7QUFBaUIsQ0FBQyxDQUFDLENBQUNJLElBQUksQ0FBQyxZQUFZO0VBQzNELElBQUlKLGdCQUFnQixFQUFFO0lBQ3BCSyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztFQUNyQztFQUVBNUIsR0FBRyxDQUFDNkIsTUFBTSxDQUFDakMsSUFBSSxFQUFFLE1BQU07SUFDckIrQixPQUFPLENBQUNDLEdBQUcsQ0FBRSwrQkFBOEJoQyxJQUFLLEVBQUMsQ0FBQztFQUNwRCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFBQyxlQUVZSSxHQUFHO0FBQUEifQ==","map":{"version":3,"names":["port","process","env","PORT","app","express","use","json","urlencoded","extended","cookieParser","helmet","compress","cors","req","res","next","context","models","config","URL_API","routes","UserRoute","middleware","handleError","notFound","dropDatabaseSync","sequelize","sync","force","then","console","log","listen"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\","sources":["index.js"],"sourcesContent":["// 1. pastikan selalu import dotenv di line pertama\r\nimport \"dotenv/config\";\r\nimport config from \"./config/config\";\r\nimport express from \"express\";\r\nimport cors from \"cors\";\r\nimport compress from \"compression\";\r\nimport cookieParser from \"cookie-parser\";\r\nimport helmet from \"helmet\";\r\nimport middleware from \"./helpers/middleware\";\r\n\r\n//for access models to db\r\nimport models, { sequelize } from \"./models/init-models\";\r\nimport routes from \"./routes/IndexRoute\";\r\n\r\n// declare port\r\nconst port = process.env.PORT || 3000;\r\n\r\nconst app = express();\r\n// parse body params and attache them to req.body\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use(cookieParser());\r\n// use helmet spy bisa dikenali SEO\r\napp.use(helmet());\r\n// secure apps by setting various HTTP headers\r\napp.use(compress());\r\n// enable CORS - Cross Origin Resource Sharing\r\napp.use(cors());\r\n\r\n// load models dan simpan di req.context\r\napp.use(async (req, res, next) => {\r\n  req.context = { models };\r\n  next();\r\n});\r\n\r\n//auth.setMiddleware(app);\r\n\r\n// call routes\r\n\r\napp.use(config.URL_API + \"/auth\", routes.UserRoute);\r\n// app.use(config.URL_API + \"/placement\", routes.PlacementRoute);\r\n// app.use(config.URL_API + \"/batch\", routes.BatchRoute);\r\n// app.use(config.URL_API + \"/talent\", routes.TalentRoute);\r\n// app.use(config.URL_API + \"/instructor\", routes.InstructorRoute);\r\n// app.use(config.URL_API + \"/curriculum\", routes.CurriculumRoute);\r\n// app.use(config.URL_API + \"/curriculum_materi\", routes.CurriculumMateriRoute);\r\n// app.use(config.URL_API + \"/curriculum_reviews\", routes.CurriculumReviewsRoute);\r\n// app.use(config.URL_API + \"/jobs\", routes.JobRoute);\r\n// app.use(config.URL_API + \"/bootcamp\", routes.BootcampRoute);\r\n// app.use(config.URL_API + \"/processbootcamp\", routes.ProcessBootCampRoute);\r\n// app.use(config.URL_API + \"/batchs\", routes.BatchesRoute);\r\n// app.use(config.URL_API + \"/settings\", routes.SettingRoute);\r\n// app.use(config.URL_API + \"/talenttimeline\", routes.TaleTimelineRoute);\r\n// app.use(config.URL_API + \"/hiring\", routes.HiringRoute);\r\n// app.use(config.URL_API + \"/client\", routes.ClientRoute);\r\n// app.use(config.URL_API + \"/hiringg\", routes.Hiring2Route);\r\n\r\n// app.use(config.URL_IMAGE + \"/\", routes.ImageRoute);\r\n\r\n\r\n//use middleware to handle error from others modules\r\napp.use(middleware.handleError);\r\napp.use(middleware.notFound);\r\n\r\n// set to false agar tidak di drop tables yang ada didatabase\r\nconst dropDatabaseSync = false;\r\n\r\nsequelize.sync({ force: dropDatabaseSync }).then(async () => {\r\n  if (dropDatabaseSync) {\r\n    console.log(\"Database do not drop\");\r\n  }\r\n\r\n  app.listen(port, () => {\r\n    console.log(`Server is listening on port ${port}`);\r\n  });\r\n});\r\n\r\nexport default app;"],"mappings":";;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAyC;AAAA;AAAA;AAZzC;;AAUA;;AAIA;AACA,MAAMA,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;AAErC,MAAMC,GAAG,GAAG,IAAAC,gBAAO,GAAE;AACrB;AACAD,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACE,IAAI,EAAE,CAAC;AACvBH,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACG,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAC/CL,GAAG,CAACE,GAAG,CAAC,IAAAI,qBAAY,GAAE,CAAC;AACvB;AACAN,GAAG,CAACE,GAAG,CAAC,IAAAK,eAAM,GAAE,CAAC;AACjB;AACAP,GAAG,CAACE,GAAG,CAAC,IAAAM,oBAAQ,GAAE,CAAC;AACnB;AACAR,GAAG,CAACE,GAAG,CAAC,IAAAO,aAAI,GAAE,CAAC;;AAEf;AACAT,GAAG,CAACE,GAAG,CAAC,OAAOQ,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAChCF,GAAG,CAACG,OAAO,GAAG;IAAEC,MAAM,EAANA;EAAO,CAAC;EACxBF,IAAI,EAAE;AACR,CAAC,CAAC;;AAEF;;AAEA;;AAEAZ,GAAG,CAACE,GAAG,CAACa,gBAAM,CAACC,OAAO,GAAG,OAAO,EAAEC,mBAAM,CAACC,SAAS,CAAC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACAlB,GAAG,CAACE,GAAG,CAACiB,mBAAU,CAACC,WAAW,CAAC;AAC/BpB,GAAG,CAACE,GAAG,CAACiB,mBAAU,CAACE,QAAQ,CAAC;;AAE5B;AACA,MAAMC,gBAAgB,GAAG,KAAK;AAE9BC,qBAAS,CAACC,IAAI,CAAC;EAAEC,KAAK,EAAEH;AAAiB,CAAC,CAAC,CAACI,IAAI,CAAC,YAAY;EAC3D,IAAIJ,gBAAgB,EAAE;IACpBK,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACrC;EAEA5B,GAAG,CAAC6B,MAAM,CAACjC,IAAI,EAAE,MAAM;IACrB+B,OAAO,CAACC,GAAG,CAAE,+BAA8BhC,IAAK,EAAC,CAAC;EACpD,CAAC,CAAC;AACJ,CAAC,CAAC;AAAC,eAEYI,GAAG;AAAA"}},"mtime":1667551021988},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\config\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst config = {\n  env: process.env.NODE_ENV || \"development\",\n  port: 3001,\n  jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\n  db_name: process.env.DATABASE || \"checklist\",\n  db_username: process.env.DATABASE_USER || \"postgres\",\n  db_password: process.env.DATABASE_PASSWORD || \"admin\",\n  URL_DOMAIN: \"/checklist\",\n  URL_IMAGE: process.env.URL_IMAGE || \"/checklist/images\",\n  URL_API: \"/checklist/api\",\n  UPLOAD_DIR: \"/storages\"\n};\nvar _default = config;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJwb3J0Iiwiand0U2VjcmV0IiwiSldUX1NFQ1JFVCIsImRiX25hbWUiLCJEQVRBQkFTRSIsImRiX3VzZXJuYW1lIiwiREFUQUJBU0VfVVNFUiIsImRiX3Bhc3N3b3JkIiwiREFUQUJBU0VfUEFTU1dPUkQiLCJVUkxfRE9NQUlOIiwiVVJMX0lNQUdFIiwiVVJMX0FQSSIsIlVQTE9BRF9ESVIiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxcY29uZmlnXFwiLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb25maWcgPSB7XHJcbiAgICBlbnY6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8IFwiZGV2ZWxvcG1lbnRcIixcclxuICAgIHBvcnQ6IDMwMDEsXHJcbiAgICBqd3RTZWNyZXQ6IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJZT1VSX3NlY3JldF9rZXlcIixcclxuICAgIGRiX25hbWU6IHByb2Nlc3MuZW52LkRBVEFCQVNFIHx8IFwiY2hlY2tsaXN0XCIsXHJcbiAgICBkYl91c2VybmFtZTogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVNFUiB8fCBcInBvc3RncmVzXCIsXHJcbiAgICBkYl9wYXNzd29yZDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfUEFTU1dPUkQgfHwgXCJhZG1pblwiLFxyXG4gICAgVVJMX0RPTUFJTjogXCIvY2hlY2tsaXN0XCIsXHJcbiAgICBVUkxfSU1BR0U6IHByb2Nlc3MuZW52LlVSTF9JTUFHRSB8fCBcIi9jaGVja2xpc3QvaW1hZ2VzXCIsXHJcbiAgICBVUkxfQVBJOiBcIi9jaGVja2xpc3QvYXBpXCIsXHJcbiAgICBVUExPQURfRElSOiBcIi9zdG9yYWdlc1wiLFxyXG4gIH07XHJcbiAgXHJcbiAgZXhwb3J0IGRlZmF1bHQgY29uZmlnOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsTUFBTSxHQUFHO0VBQ1hDLEdBQUcsRUFBRUMsT0FBTyxDQUFDRCxHQUFHLENBQUNFLFFBQVEsSUFBSSxhQUFhO0VBQzFDQyxJQUFJLEVBQUUsSUFBSTtFQUNWQyxTQUFTLEVBQUVILE9BQU8sQ0FBQ0QsR0FBRyxDQUFDSyxVQUFVLElBQUksaUJBQWlCO0VBQ3REQyxPQUFPLEVBQUVMLE9BQU8sQ0FBQ0QsR0FBRyxDQUFDTyxRQUFRLElBQUksV0FBVztFQUM1Q0MsV0FBVyxFQUFFUCxPQUFPLENBQUNELEdBQUcsQ0FBQ1MsYUFBYSxJQUFJLFVBQVU7RUFDcERDLFdBQVcsRUFBRVQsT0FBTyxDQUFDRCxHQUFHLENBQUNXLGlCQUFpQixJQUFJLE9BQU87RUFDckRDLFVBQVUsRUFBRSxZQUFZO0VBQ3hCQyxTQUFTLEVBQUVaLE9BQU8sQ0FBQ0QsR0FBRyxDQUFDYSxTQUFTLElBQUksbUJBQW1CO0VBQ3ZEQyxPQUFPLEVBQUUsZ0JBQWdCO0VBQ3pCQyxVQUFVLEVBQUU7QUFDZCxDQUFDO0FBQUMsZUFFYWhCLE1BQU07QUFBQSJ9","map":{"version":3,"names":["config","env","process","NODE_ENV","port","jwtSecret","JWT_SECRET","db_name","DATABASE","db_username","DATABASE_USER","db_password","DATABASE_PASSWORD","URL_DOMAIN","URL_IMAGE","URL_API","UPLOAD_DIR"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\config\\","sources":["config.js"],"sourcesContent":["const config = {\r\n    env: process.env.NODE_ENV || \"development\",\r\n    port: 3001,\r\n    jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\r\n    db_name: process.env.DATABASE || \"checklist\",\r\n    db_username: process.env.DATABASE_USER || \"postgres\",\r\n    db_password: process.env.DATABASE_PASSWORD || \"admin\",\r\n    URL_DOMAIN: \"/checklist\",\r\n    URL_IMAGE: process.env.URL_IMAGE || \"/checklist/images\",\r\n    URL_API: \"/checklist/api\",\r\n    UPLOAD_DIR: \"/storages\",\r\n  };\r\n  \r\n  export default config;"],"mappings":";;;;;;AAAA,MAAMA,MAAM,GAAG;EACXC,GAAG,EAAEC,OAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;EAC1CC,IAAI,EAAE,IAAI;EACVC,SAAS,EAAEH,OAAO,CAACD,GAAG,CAACK,UAAU,IAAI,iBAAiB;EACtDC,OAAO,EAAEL,OAAO,CAACD,GAAG,CAACO,QAAQ,IAAI,WAAW;EAC5CC,WAAW,EAAEP,OAAO,CAACD,GAAG,CAACS,aAAa,IAAI,UAAU;EACpDC,WAAW,EAAET,OAAO,CAACD,GAAG,CAACW,iBAAiB,IAAI,OAAO;EACrDC,UAAU,EAAE,YAAY;EACxBC,SAAS,EAAEZ,OAAO,CAACD,GAAG,CAACa,SAAS,IAAI,mBAAmB;EACvDC,OAAO,EAAE,gBAAgB;EACzBC,UAAU,EAAE;AACd,CAAC;AAAC,eAEahB,MAAM;AAAA"}},"mtime":1667549969310},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\config\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\config\\\\config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst config = {\n  env: process.env.NODE_ENV || \"development\",\n  port: 3001,\n  jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\n  db_name: process.env.DATABASE || \"checklist\",\n  db_username: process.env.DATABASE_USER || \"postgres\",\n  db_password: process.env.DATABASE_PASSWORD || \"admin\",\n  URL_DOMAIN: \"/checklist\",\n  URL_IMAGE: process.env.URL_IMAGE || \"/checklist/images\",\n  URL_API: \"/checklist/api\",\n  UPLOAD_DIR: \"/storages\"\n};\nvar _default = config;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJwb3J0Iiwiand0U2VjcmV0IiwiSldUX1NFQ1JFVCIsImRiX25hbWUiLCJEQVRBQkFTRSIsImRiX3VzZXJuYW1lIiwiREFUQUJBU0VfVVNFUiIsImRiX3Bhc3N3b3JkIiwiREFUQUJBU0VfUEFTU1dPUkQiLCJVUkxfRE9NQUlOIiwiVVJMX0lNQUdFIiwiVVJMX0FQSSIsIlVQTE9BRF9ESVIiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxcY29uZmlnXFwiLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb25maWcgPSB7XHJcbiAgICBlbnY6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8IFwiZGV2ZWxvcG1lbnRcIixcclxuICAgIHBvcnQ6IDMwMDEsXHJcbiAgICBqd3RTZWNyZXQ6IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJZT1VSX3NlY3JldF9rZXlcIixcclxuICAgIGRiX25hbWU6IHByb2Nlc3MuZW52LkRBVEFCQVNFIHx8IFwiY2hlY2tsaXN0XCIsXHJcbiAgICBkYl91c2VybmFtZTogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVNFUiB8fCBcInBvc3RncmVzXCIsXHJcbiAgICBkYl9wYXNzd29yZDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfUEFTU1dPUkQgfHwgXCJhZG1pblwiLFxyXG4gICAgVVJMX0RPTUFJTjogXCIvY2hlY2tsaXN0XCIsXHJcbiAgICBVUkxfSU1BR0U6IHByb2Nlc3MuZW52LlVSTF9JTUFHRSB8fCBcIi9jaGVja2xpc3QvaW1hZ2VzXCIsXHJcbiAgICBVUkxfQVBJOiBcIi9jaGVja2xpc3QvYXBpXCIsXHJcbiAgICBVUExPQURfRElSOiBcIi9zdG9yYWdlc1wiLFxyXG4gIH07XHJcbiAgXHJcbiAgZXhwb3J0IGRlZmF1bHQgY29uZmlnOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsTUFBTSxHQUFHO0VBQ1hDLEdBQUcsRUFBRUMsT0FBTyxDQUFDRCxHQUFHLENBQUNFLFFBQVEsSUFBSSxhQUFhO0VBQzFDQyxJQUFJLEVBQUUsSUFBSTtFQUNWQyxTQUFTLEVBQUVILE9BQU8sQ0FBQ0QsR0FBRyxDQUFDSyxVQUFVLElBQUksaUJBQWlCO0VBQ3REQyxPQUFPLEVBQUVMLE9BQU8sQ0FBQ0QsR0FBRyxDQUFDTyxRQUFRLElBQUksV0FBVztFQUM1Q0MsV0FBVyxFQUFFUCxPQUFPLENBQUNELEdBQUcsQ0FBQ1MsYUFBYSxJQUFJLFVBQVU7RUFDcERDLFdBQVcsRUFBRVQsT0FBTyxDQUFDRCxHQUFHLENBQUNXLGlCQUFpQixJQUFJLE9BQU87RUFDckRDLFVBQVUsRUFBRSxZQUFZO0VBQ3hCQyxTQUFTLEVBQUVaLE9BQU8sQ0FBQ0QsR0FBRyxDQUFDYSxTQUFTLElBQUksbUJBQW1CO0VBQ3ZEQyxPQUFPLEVBQUUsZ0JBQWdCO0VBQ3pCQyxVQUFVLEVBQUU7QUFDZCxDQUFDO0FBQUMsZUFFYWhCLE1BQU07QUFBQSJ9","map":{"version":3,"names":["config","env","process","NODE_ENV","port","jwtSecret","JWT_SECRET","db_name","DATABASE","db_username","DATABASE_USER","db_password","DATABASE_PASSWORD","URL_DOMAIN","URL_IMAGE","URL_API","UPLOAD_DIR"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\config\\","sources":["config.js"],"sourcesContent":["const config = {\r\n    env: process.env.NODE_ENV || \"development\",\r\n    port: 3001,\r\n    jwtSecret: process.env.JWT_SECRET || \"YOUR_secret_key\",\r\n    db_name: process.env.DATABASE || \"checklist\",\r\n    db_username: process.env.DATABASE_USER || \"postgres\",\r\n    db_password: process.env.DATABASE_PASSWORD || \"admin\",\r\n    URL_DOMAIN: \"/checklist\",\r\n    URL_IMAGE: process.env.URL_IMAGE || \"/checklist/images\",\r\n    URL_API: \"/checklist/api\",\r\n    UPLOAD_DIR: \"/storages\",\r\n  };\r\n  \r\n  export default config;"],"mappings":";;;;;;AAAA,MAAMA,MAAM,GAAG;EACXC,GAAG,EAAEC,OAAO,CAACD,GAAG,CAACE,QAAQ,IAAI,aAAa;EAC1CC,IAAI,EAAE,IAAI;EACVC,SAAS,EAAEH,OAAO,CAACD,GAAG,CAACK,UAAU,IAAI,iBAAiB;EACtDC,OAAO,EAAEL,OAAO,CAACD,GAAG,CAACO,QAAQ,IAAI,WAAW;EAC5CC,WAAW,EAAEP,OAAO,CAACD,GAAG,CAACS,aAAa,IAAI,UAAU;EACpDC,WAAW,EAAET,OAAO,CAACD,GAAG,CAACW,iBAAiB,IAAI,OAAO;EACrDC,UAAU,EAAE,YAAY;EACxBC,SAAS,EAAEZ,OAAO,CAACD,GAAG,CAACa,SAAS,IAAI,mBAAmB;EACvDC,OAAO,EAAE,gBAAgB;EACzBC,UAAU,EAAE;AACd,CAAC;AAAC,eAEahB,MAAM;AAAA"}},"mtime":1667549969310},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst pinoNoir = require('pino-noir');\nconst pinoLogger = require('express-pino-logger');\nconst {\n  STATUS_CODES\n} = require('http');\nconst logger = () => {\n  return pinoLogger({\n    serializers: pinoNoir(['res.headers.set-cookie', 'req.headers.cookie', 'req.headers.authorization'])\n  });\n};\nconst handleError = (err, req, res, next) => {\n  console.error(err);\n  if (res.headersSent) return next(err);\n  const statusCode = err.statusCode || 500;\n  const errorMessage = STATUS_CODES[statusCode] || 'Internal Error';\n  res.status(statusCode).json({\n    error: errorMessage\n  });\n};\nconst notFound = (req, res) => {\n  res.status(404).json({\n    error: 'Not Found'\n  });\n};\nconst forbidden = next => {\n  const err = new Error(\"Forbidden\");\n  err.statusCode = 403;\n  return next(err);\n};\nconst cors = (req, res, next) => {\n  const origin = req.headers.origin;\n  res.setHeader('Access-Control-Allow-Origin', origin || '*');\n  res.setHeader('Access-Control-Allow-Methods', 'POST, GET, PUT, DELETE, OPTIONS, XMODIFY');\n  res.setHeader('Access-Control-Allow-Credentials', 'true');\n  res.setHeader('Access-Control-Max-Age', '86400');\n  res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept');\n  next();\n};\nvar _default = {\n  logger: logger(),\n  cors,\n  notFound,\n  handleError,\n  forbidden\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaW5vTm9pciIsInJlcXVpcmUiLCJwaW5vTG9nZ2VyIiwiU1RBVFVTX0NPREVTIiwibG9nZ2VyIiwic2VyaWFsaXplcnMiLCJoYW5kbGVFcnJvciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwiZXJyb3IiLCJoZWFkZXJzU2VudCIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJqc29uIiwibm90Rm91bmQiLCJmb3JiaWRkZW4iLCJFcnJvciIsImNvcnMiLCJvcmlnaW4iLCJoZWFkZXJzIiwic2V0SGVhZGVyIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGFmaXRyXFxPbmVEcml2ZVxcRG9jdW1lbnRzXFx0ZXN0bm9kZWpzXFxzZXJ2ZXJcXGhlbHBlcnNcXCIsInNvdXJjZXMiOlsibWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwaW5vTm9pciA9IHJlcXVpcmUoJ3Bpbm8tbm9pcicpXHJcbmNvbnN0IHBpbm9Mb2dnZXIgPSByZXF1aXJlKCdleHByZXNzLXBpbm8tbG9nZ2VyJylcclxuY29uc3QgeyBTVEFUVVNfQ09ERVMgfSA9IHJlcXVpcmUoJ2h0dHAnKVxyXG5cclxuXHJcblxyXG5jb25zdCBsb2dnZXI9KCk9PiB7XHJcbiAgICByZXR1cm4gcGlub0xvZ2dlcih7XHJcbiAgICAgICAgc2VyaWFsaXplcnM6IHBpbm9Ob2lyKFtcclxuICAgICAgICAgICAgJ3Jlcy5oZWFkZXJzLnNldC1jb29raWUnLFxyXG4gICAgICAgICAgICAncmVxLmhlYWRlcnMuY29va2llJyxcclxuICAgICAgICAgICAgJ3JlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24nXHJcbiAgICAgICAgXSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZUVycm9yPShlcnIsIHJlcSwgcmVzLCBuZXh0KT0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxyXG4gICAgaWYgKHJlcy5oZWFkZXJzU2VudCkgcmV0dXJuIG5leHQoZXJyKVxyXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVyci5zdGF0dXNDb2RlIHx8IDUwMFxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gU1RBVFVTX0NPREVTW3N0YXR1c0NvZGVdIHx8ICdJbnRlcm5hbCBFcnJvcidcclxuICAgIHJlcy5zdGF0dXMoc3RhdHVzQ29kZSkuanNvbih7IGVycm9yOiBlcnJvck1lc3NhZ2UgfSlcclxufVxyXG5cclxuY29uc3Qgbm90Rm91bmQ9KHJlcSwgcmVzKT0+IHtcclxuICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgRm91bmQnIH0pXHJcbn1cclxuXHJcbmNvbnN0IGZvcmJpZGRlbj0obmV4dCk9PntcclxuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcIkZvcmJpZGRlblwiKVxyXG4gICAgZXJyLnN0YXR1c0NvZGUgPSA0MDM7XHJcbiAgICByZXR1cm4gbmV4dChlcnIpXHJcbn1cclxuXHJcbmNvbnN0IGNvcnM9KHJlcSwgcmVzLCBuZXh0KT0+IHtcclxuICAgIGNvbnN0IG9yaWdpbiA9IHJlcS5oZWFkZXJzLm9yaWdpblxyXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgb3JpZ2luIHx8ICcqJylcclxuICAgIHJlcy5zZXRIZWFkZXIoXHJcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLFxyXG4gICAgICAgICdQT1NULCBHRVQsIFBVVCwgREVMRVRFLCBPUFRJT05TLCBYTU9ESUZZJ1xyXG4gICAgKVxyXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpXHJcbiAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1NYXgtQWdlJywgJzg2NDAwJylcclxuICAgIHJlcy5zZXRIZWFkZXIoXHJcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLFxyXG4gICAgICAgICdYLVJlcXVlc3RlZC1XaXRoLCBYLUhUVFAtTWV0aG9kLU92ZXJyaWRlLCBDb250ZW50LVR5cGUsIEFjY2VwdCdcclxuXHJcbiAgICApXHJcbiAgICBuZXh0KClcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGxvZ2dlcjogbG9nZ2VyKCksXHJcbiAgICBjb3JzLFxyXG4gICAgbm90Rm91bmQsXHJcbiAgICBoYW5kbGVFcnJvcixcclxuICAgIGZvcmJpZGRlblxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDckMsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDakQsTUFBTTtFQUFFRTtBQUFhLENBQUMsR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUl4QyxNQUFNRyxNQUFNLEdBQUMsTUFBSztFQUNkLE9BQU9GLFVBQVUsQ0FBQztJQUNkRyxXQUFXLEVBQUVMLFFBQVEsQ0FBQyxDQUNsQix3QkFBd0IsRUFDeEIsb0JBQW9CLEVBQ3BCLDJCQUEyQixDQUM5QjtFQUNMLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRCxNQUFNTSxXQUFXLEdBQUMsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFJO0VBQ3RDQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0wsR0FBRyxDQUFDO0VBQ2xCLElBQUlFLEdBQUcsQ0FBQ0ksV0FBVyxFQUFFLE9BQU9ILElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ3JDLE1BQU1PLFVBQVUsR0FBR1AsR0FBRyxDQUFDTyxVQUFVLElBQUksR0FBRztFQUN4QyxNQUFNQyxZQUFZLEdBQUdaLFlBQVksQ0FBQ1csVUFBVSxDQUFDLElBQUksZ0JBQWdCO0VBQ2pFTCxHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsVUFBVSxDQUFDLENBQUNHLElBQUksQ0FBQztJQUFFTCxLQUFLLEVBQUVHO0VBQWEsQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFFRCxNQUFNRyxRQUFRLEdBQUMsQ0FBQ1YsR0FBRyxFQUFFQyxHQUFHLEtBQUk7RUFDeEJBLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUwsS0FBSyxFQUFFO0VBQVksQ0FBQyxDQUFDO0FBQ2hELENBQUM7QUFFRCxNQUFNTyxTQUFTLEdBQUVULElBQUksSUFBRztFQUNwQixNQUFNSCxHQUFHLEdBQUcsSUFBSWEsS0FBSyxDQUFDLFdBQVcsQ0FBQztFQUNsQ2IsR0FBRyxDQUFDTyxVQUFVLEdBQUcsR0FBRztFQUNwQixPQUFPSixJQUFJLENBQUNILEdBQUcsQ0FBQztBQUNwQixDQUFDO0FBRUQsTUFBTWMsSUFBSSxHQUFDLENBQUNiLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUk7RUFDMUIsTUFBTVksTUFBTSxHQUFHZCxHQUFHLENBQUNlLE9BQU8sQ0FBQ0QsTUFBTTtFQUNqQ2IsR0FBRyxDQUFDZSxTQUFTLENBQUMsNkJBQTZCLEVBQUVGLE1BQU0sSUFBSSxHQUFHLENBQUM7RUFDM0RiLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QiwwQ0FBMEMsQ0FDN0M7RUFDRGYsR0FBRyxDQUFDZSxTQUFTLENBQUMsa0NBQWtDLEVBQUUsTUFBTSxDQUFDO0VBQ3pEZixHQUFHLENBQUNlLFNBQVMsQ0FBQyx3QkFBd0IsRUFBRSxPQUFPLENBQUM7RUFDaERmLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QixnRUFBZ0UsQ0FFbkU7RUFDRGQsSUFBSSxFQUFFO0FBQ1YsQ0FBQztBQUFBLGVBR2M7RUFDWE4sTUFBTSxFQUFFQSxNQUFNLEVBQUU7RUFDaEJpQixJQUFJO0VBQ0pILFFBQVE7RUFDUlosV0FBVztFQUNYYTtBQUNKLENBQUM7QUFBQSJ9","map":{"version":3,"names":["pinoNoir","require","pinoLogger","STATUS_CODES","logger","serializers","handleError","err","req","res","next","console","error","headersSent","statusCode","errorMessage","status","json","notFound","forbidden","Error","cors","origin","headers","setHeader"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\helpers\\","sources":["middleware.js"],"sourcesContent":["const pinoNoir = require('pino-noir')\r\nconst pinoLogger = require('express-pino-logger')\r\nconst { STATUS_CODES } = require('http')\r\n\r\n\r\n\r\nconst logger=()=> {\r\n    return pinoLogger({\r\n        serializers: pinoNoir([\r\n            'res.headers.set-cookie',\r\n            'req.headers.cookie',\r\n            'req.headers.authorization'\r\n        ])\r\n    })\r\n}\r\n\r\nconst handleError=(err, req, res, next)=> {\r\n    console.error(err)\r\n    if (res.headersSent) return next(err)\r\n    const statusCode = err.statusCode || 500\r\n    const errorMessage = STATUS_CODES[statusCode] || 'Internal Error'\r\n    res.status(statusCode).json({ error: errorMessage })\r\n}\r\n\r\nconst notFound=(req, res)=> {\r\n    res.status(404).json({ error: 'Not Found' })\r\n}\r\n\r\nconst forbidden=(next)=>{\r\n    const err = new Error(\"Forbidden\")\r\n    err.statusCode = 403;\r\n    return next(err)\r\n}\r\n\r\nconst cors=(req, res, next)=> {\r\n    const origin = req.headers.origin\r\n    res.setHeader('Access-Control-Allow-Origin', origin || '*')\r\n    res.setHeader(\r\n        'Access-Control-Allow-Methods',\r\n        'POST, GET, PUT, DELETE, OPTIONS, XMODIFY'\r\n    )\r\n    res.setHeader('Access-Control-Allow-Credentials', 'true')\r\n    res.setHeader('Access-Control-Max-Age', '86400')\r\n    res.setHeader(\r\n        'Access-Control-Allow-Headers',\r\n        'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept'\r\n\r\n    )\r\n    next()\r\n}\r\n\r\n\r\nexport default {\r\n    logger: logger(),\r\n    cors,\r\n    notFound,\r\n    handleError,\r\n    forbidden\r\n}"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,WAAW,CAAC;AACrC,MAAMC,UAAU,GAAGD,OAAO,CAAC,qBAAqB,CAAC;AACjD,MAAM;EAAEE;AAAa,CAAC,GAAGF,OAAO,CAAC,MAAM,CAAC;AAIxC,MAAMG,MAAM,GAAC,MAAK;EACd,OAAOF,UAAU,CAAC;IACdG,WAAW,EAAEL,QAAQ,CAAC,CAClB,wBAAwB,EACxB,oBAAoB,EACpB,2BAA2B,CAC9B;EACL,CAAC,CAAC;AACN,CAAC;AAED,MAAMM,WAAW,GAAC,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACtCC,OAAO,CAACC,KAAK,CAACL,GAAG,CAAC;EAClB,IAAIE,GAAG,CAACI,WAAW,EAAE,OAAOH,IAAI,CAACH,GAAG,CAAC;EACrC,MAAMO,UAAU,GAAGP,GAAG,CAACO,UAAU,IAAI,GAAG;EACxC,MAAMC,YAAY,GAAGZ,YAAY,CAACW,UAAU,CAAC,IAAI,gBAAgB;EACjEL,GAAG,CAACO,MAAM,CAACF,UAAU,CAAC,CAACG,IAAI,CAAC;IAAEL,KAAK,EAAEG;EAAa,CAAC,CAAC;AACxD,CAAC;AAED,MAAMG,QAAQ,GAAC,CAACV,GAAG,EAAEC,GAAG,KAAI;EACxBA,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEL,KAAK,EAAE;EAAY,CAAC,CAAC;AAChD,CAAC;AAED,MAAMO,SAAS,GAAET,IAAI,IAAG;EACpB,MAAMH,GAAG,GAAG,IAAIa,KAAK,CAAC,WAAW,CAAC;EAClCb,GAAG,CAACO,UAAU,GAAG,GAAG;EACpB,OAAOJ,IAAI,CAACH,GAAG,CAAC;AACpB,CAAC;AAED,MAAMc,IAAI,GAAC,CAACb,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EAC1B,MAAMY,MAAM,GAAGd,GAAG,CAACe,OAAO,CAACD,MAAM;EACjCb,GAAG,CAACe,SAAS,CAAC,6BAA6B,EAAEF,MAAM,IAAI,GAAG,CAAC;EAC3Db,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,0CAA0C,CAC7C;EACDf,GAAG,CAACe,SAAS,CAAC,kCAAkC,EAAE,MAAM,CAAC;EACzDf,GAAG,CAACe,SAAS,CAAC,wBAAwB,EAAE,OAAO,CAAC;EAChDf,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,gEAAgE,CAEnE;EACDd,IAAI,EAAE;AACV,CAAC;AAAA,eAGc;EACXN,MAAM,EAAEA,MAAM,EAAE;EAChBiB,IAAI;EACJH,QAAQ;EACRZ,WAAW;EACXa;AACJ,CAAC;AAAA"}},"mtime":1667550111059},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\init-models.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sequelize = exports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nvar _users2 = _interopRequireDefault(require(\"./users.js\"));\nvar _config = _interopRequireDefault(require(\"../config/config.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst DataTypes = _sequelize2.default.DataTypes;\nconst sequelize = new _sequelize2.default(_config.default.db_name, _config.default.db_username, _config.default.db_password, {\n  dialect: \"postgres\",\n  pool: {\n    max: 5,\n    min: 0,\n    acquire: 30000,\n    idle: 10000\n  }\n});\nexports.sequelize = sequelize;\nconst initModels = sequelize => {\n  const users = _users2.default.init(sequelize, DataTypes);\n  return {\n    users\n  };\n};\nconst models = initModels(sequelize);\nvar _default = models;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJfc2VxdWVsaXplIiwic2VxdWVsaXplIiwiU2VxdWVsaXplIiwiY29uZmlnIiwiZGJfbmFtZSIsImRiX3VzZXJuYW1lIiwiZGJfcGFzc3dvcmQiLCJkaWFsZWN0IiwicG9vbCIsIm1heCIsIm1pbiIsImFjcXVpcmUiLCJpZGxlIiwiaW5pdE1vZGVscyIsInVzZXJzIiwiX3VzZXJzIiwiaW5pdCIsIm1vZGVscyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxhZml0clxcT25lRHJpdmVcXERvY3VtZW50c1xcdGVzdG5vZGVqc1xcc2VydmVyXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsiaW5pdC1tb2RlbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgX3NlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5jb25zdCBEYXRhVHlwZXMgPSBfc2VxdWVsaXplLkRhdGFUeXBlcztcbmltcG9ydCBfdXNlcnMgZnJvbSAgXCIuL3VzZXJzLmpzXCI7XG5cbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9jb25maWcuanNcIjtcblxuY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShcbmNvbmZpZy5kYl9uYW1lLFxuY29uZmlnLmRiX3VzZXJuYW1lLFxuY29uZmlnLmRiX3Bhc3N3b3JkLFxue1xuICBkaWFsZWN0IDogXCJwb3N0Z3Jlc1wiLFxuICBwb29sIDoge1xuICAgIG1heCA6IDUsXG4gICAgbWluIDogMCxcbiAgICBhY3F1aXJlIDogMzAwMDAsXG4gICAgaWRsZSA6IDEwMDAwLFxuICB9XG59XG4pXG5cbmNvbnN0IGluaXRNb2RlbHMgPSAoc2VxdWVsaXplKSA9PiB7XG4gIGNvbnN0IHVzZXJzID0gX3VzZXJzLmluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpO1xuXG5cbiAgcmV0dXJuIHtcbiAgICB1c2VycyxcbiAgfTtcbn1cblxuY29uc3QgbW9kZWxzID0gaW5pdE1vZGVscyhzZXF1ZWxpemUpO1xuXG5leHBvcnQgZGVmYXVsdCBtb2RlbHM7XG5leHBvcnQge3NlcXVlbGl6ZX07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUdBO0FBRUE7QUFBeUM7QUFIekMsTUFBTUEsU0FBUyxHQUFHQyxtQkFBVSxDQUFDRCxTQUFTO0FBS3RDLE1BQU1FLFNBQVMsR0FBRyxJQUFJQyxtQkFBUyxDQUMvQkMsZUFBTSxDQUFDQyxPQUFPLEVBQ2RELGVBQU0sQ0FBQ0UsV0FBVyxFQUNsQkYsZUFBTSxDQUFDRyxXQUFXLEVBQ2xCO0VBQ0VDLE9BQU8sRUFBRyxVQUFVO0VBQ3BCQyxJQUFJLEVBQUc7SUFDTEMsR0FBRyxFQUFHLENBQUM7SUFDUEMsR0FBRyxFQUFHLENBQUM7SUFDUEMsT0FBTyxFQUFHLEtBQUs7SUFDZkMsSUFBSSxFQUFHO0VBQ1Q7QUFDRixDQUFDLENBQ0E7QUFBQTtBQUVELE1BQU1DLFVBQVUsR0FBSVosU0FBUyxJQUFLO0VBQ2hDLE1BQU1hLEtBQUssR0FBR0MsZUFBTSxDQUFDQyxJQUFJLENBQUNmLFNBQVMsRUFBRUYsU0FBUyxDQUFDO0VBRy9DLE9BQU87SUFDTGU7RUFDRixDQUFDO0FBQ0gsQ0FBQztBQUVELE1BQU1HLE1BQU0sR0FBR0osVUFBVSxDQUFDWixTQUFTLENBQUM7QUFBQyxlQUV0QmdCLE1BQU07QUFBQSJ9","map":{"version":3,"names":["DataTypes","_sequelize","sequelize","Sequelize","config","db_name","db_username","db_password","dialect","pool","max","min","acquire","idle","initModels","users","_users","init","models"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\models\\","sources":["init-models.js"],"sourcesContent":["import Sequelize from \"sequelize\";\nimport _sequelize from \"sequelize\";\nconst DataTypes = _sequelize.DataTypes;\nimport _users from  \"./users.js\";\n\nimport config from \"../config/config.js\";\n\nconst sequelize = new Sequelize(\nconfig.db_name,\nconfig.db_username,\nconfig.db_password,\n{\n  dialect : \"postgres\",\n  pool : {\n    max : 5,\n    min : 0,\n    acquire : 30000,\n    idle : 10000,\n  }\n}\n)\n\nconst initModels = (sequelize) => {\n  const users = _users.init(sequelize, DataTypes);\n\n\n  return {\n    users,\n  };\n}\n\nconst models = initModels(sequelize);\n\nexport default models;\nexport {sequelize};"],"mappings":";;;;;;AAAA;AAGA;AAEA;AAAyC;AAHzC,MAAMA,SAAS,GAAGC,mBAAU,CAACD,SAAS;AAKtC,MAAME,SAAS,GAAG,IAAIC,mBAAS,CAC/BC,eAAM,CAACC,OAAO,EACdD,eAAM,CAACE,WAAW,EAClBF,eAAM,CAACG,WAAW,EAClB;EACEC,OAAO,EAAG,UAAU;EACpBC,IAAI,EAAG;IACLC,GAAG,EAAG,CAAC;IACPC,GAAG,EAAG,CAAC;IACPC,OAAO,EAAG,KAAK;IACfC,IAAI,EAAG;EACT;AACF,CAAC,CACA;AAAA;AAED,MAAMC,UAAU,GAAIZ,SAAS,IAAK;EAChC,MAAMa,KAAK,GAAGC,eAAM,CAACC,IAAI,CAACf,SAAS,EAAEF,SAAS,CAAC;EAG/C,OAAO;IACLe;EACF,CAAC;AACH,CAAC;AAED,MAAMG,MAAM,GAAGJ,UAAU,CAACZ,SAAS,CAAC;AAAC,eAEtBgB,MAAM;AAAA"}},"mtime":1667551947653},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass users extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      user_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      user_name: {\n        type: DataTypes.STRING(50),\n        allowNull: false,\n        unique: \"users_user_name_key\"\n      },\n      user_email: {\n        type: DataTypes.STRING(50),\n        allowNull: false\n      },\n      user_password: {\n        type: DataTypes.STRING(255),\n        allowNull: false\n      },\n      user_phone: {\n        type: DataTypes.STRING(50),\n        allowNull: false,\n        unique: \"users_user_phone_key\"\n      }\n    }, {\n      sequelize,\n      tableName: 'users',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"users_pkey\",\n        unique: true,\n        fields: [{\n          name: \"user_id\"\n        }]\n      }, {\n        name: \"users_user_name_key\",\n        unique: true,\n        fields: [{\n          name: \"user_name\"\n        }]\n      }, {\n        name: \"users_user_phone_key\",\n        unique: true,\n        fields: [{\n          name: \"user_phone\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = users;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJ1c2VycyIsImluaXQiLCJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJ1c2VyX2lkIiwiYXV0b0luY3JlbWVudCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInVzZXJfbmFtZSIsIlNUUklORyIsInVuaXF1ZSIsInVzZXJfZW1haWwiLCJ1c2VyX3Bhc3N3b3JkIiwidXNlcl9waG9uZSIsInRhYmxlTmFtZSIsInNjaGVtYSIsInRpbWVzdGFtcHMiLCJpbmRleGVzIiwibmFtZSIsImZpZWxkcyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxhZml0clxcT25lRHJpdmVcXERvY3VtZW50c1xcdGVzdG5vZGVqc1xcc2VydmVyXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsidXNlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9zZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmNvbnN0IHsgTW9kZWwsIFNlcXVlbGl6ZSB9ID0gX3NlcXVlbGl6ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdXNlcnMgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSB7XG4gIHJldHVybiBzdXBlci5pbml0KHtcbiAgICB1c2VyX2lkOiB7XG4gICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZVxuICAgIH0sXG4gICAgdXNlcl9uYW1lOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDUwKSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB1bmlxdWU6IFwidXNlcnNfdXNlcl9uYW1lX2tleVwiXG4gICAgfSxcbiAgICB1c2VyX2VtYWlsOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDUwKSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2VcbiAgICB9LFxuICAgIHVzZXJfcGFzc3dvcmQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoMjU1KSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2VcbiAgICB9LFxuICAgIHVzZXJfcGhvbmU6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoNTApLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHVuaXF1ZTogXCJ1c2Vyc191c2VyX3Bob25lX2tleVwiXG4gICAgfVxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ3VzZXJzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2Vyc19wa2V5XCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfaWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInVzZXJzX3VzZXJfbmFtZV9rZXlcIixcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICB7IG5hbWU6IFwidXNlcl9uYW1lXCIgfSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2Vyc191c2VyX3Bob25lX2tleVwiLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIGZpZWxkczogW1xuICAgICAgICAgIHsgbmFtZTogXCJ1c2VyX3Bob25lXCIgfSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICBdXG4gIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQW1DO0FBQ25DLE1BQU07RUFBRUEsS0FBSztFQUFFQztBQUFVLENBQUMsR0FBR0MsbUJBQVU7QUFFeEIsTUFBTUMsS0FBSyxTQUFTSCxLQUFLLENBQUM7RUFDdkMsT0FBT0ksSUFBSSxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsRUFBRTtJQUNsQyxPQUFPLEtBQUssQ0FBQ0YsSUFBSSxDQUFDO01BQ2hCRyxPQUFPLEVBQUU7UUFDUEMsYUFBYSxFQUFFLElBQUk7UUFDbkJDLElBQUksRUFBRUgsU0FBUyxDQUFDSSxPQUFPO1FBQ3ZCQyxTQUFTLEVBQUUsS0FBSztRQUNoQkMsVUFBVSxFQUFFO01BQ2QsQ0FBQztNQUNEQyxTQUFTLEVBQUU7UUFDVEosSUFBSSxFQUFFSCxTQUFTLENBQUNRLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDMUJILFNBQVMsRUFBRSxLQUFLO1FBQ2hCSSxNQUFNLEVBQUU7TUFDVixDQUFDO01BQ0RDLFVBQVUsRUFBRTtRQUNWUCxJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFO01BQ2IsQ0FBQztNQUNETSxhQUFhLEVBQUU7UUFDYlIsSUFBSSxFQUFFSCxTQUFTLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDM0JILFNBQVMsRUFBRTtNQUNiLENBQUM7TUFDRE8sVUFBVSxFQUFFO1FBQ1ZULElBQUksRUFBRUgsU0FBUyxDQUFDUSxNQUFNLENBQUMsRUFBRSxDQUFDO1FBQzFCSCxTQUFTLEVBQUUsS0FBSztRQUNoQkksTUFBTSxFQUFFO01BQ1Y7SUFDRixDQUFDLEVBQUU7TUFDRFYsU0FBUztNQUNUYyxTQUFTLEVBQUUsT0FBTztNQUNsQkMsTUFBTSxFQUFFLFFBQVE7TUFDaEJDLFVBQVUsRUFBRSxLQUFLO01BQ2pCQyxPQUFPLEVBQUUsQ0FDUDtRQUNFQyxJQUFJLEVBQUUsWUFBWTtRQUNsQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQVUsQ0FBQztNQUV2QixDQUFDLEVBQ0Q7UUFDRUEsSUFBSSxFQUFFLHFCQUFxQjtRQUMzQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQVksQ0FBQztNQUV6QixDQUFDLEVBQ0Q7UUFDRUEsSUFBSSxFQUFFLHNCQUFzQjtRQUM1QlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQWEsQ0FBQztNQUUxQixDQUFDO0lBRUwsQ0FBQyxDQUFDO0VBQ0Y7QUFDRjtBQUFDIn0=","map":{"version":3,"names":["Model","Sequelize","_sequelize","users","init","sequelize","DataTypes","user_id","autoIncrement","type","INTEGER","allowNull","primaryKey","user_name","STRING","unique","user_email","user_password","user_phone","tableName","schema","timestamps","indexes","name","fields"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\models\\","sources":["users.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class users extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    user_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    user_name: {\n      type: DataTypes.STRING(50),\n      allowNull: false,\n      unique: \"users_user_name_key\"\n    },\n    user_email: {\n      type: DataTypes.STRING(50),\n      allowNull: false\n    },\n    user_password: {\n      type: DataTypes.STRING(255),\n      allowNull: false\n    },\n    user_phone: {\n      type: DataTypes.STRING(50),\n      allowNull: false,\n      unique: \"users_user_phone_key\"\n    }\n  }, {\n    sequelize,\n    tableName: 'users',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"users_pkey\",\n        unique: true,\n        fields: [\n          { name: \"user_id\" },\n        ]\n      },\n      {\n        name: \"users_user_name_key\",\n        unique: true,\n        fields: [\n          { name: \"user_name\" },\n        ]\n      },\n      {\n        name: \"users_user_phone_key\",\n        unique: true,\n        fields: [\n          { name: \"user_phone\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,KAAK,SAASH,KAAK,CAAC;EACvC,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,SAAS,EAAE;QACTJ,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,KAAK;QAChBI,MAAM,EAAE;MACV,CAAC;MACDC,UAAU,EAAE;QACVP,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE;MACb,CAAC;MACDM,aAAa,EAAE;QACbR,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,GAAG,CAAC;QAC3BH,SAAS,EAAE;MACb,CAAC;MACDO,UAAU,EAAE;QACVT,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,KAAK;QAChBI,MAAM,EAAE;MACV;IACF,CAAC,EAAE;MACDV,SAAS;MACTc,SAAS,EAAE,OAAO;MAClBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,YAAY;QAClBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC,EACD;QACEA,IAAI,EAAE,qBAAqB;QAC3BR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAY,CAAC;MAEzB,CAAC,EACD;QACEA,IAAI,EAAE,sBAAsB;QAC5BR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAa,CAAC;MAE1B,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1667551420334},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\IndexRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _UserRoute = _interopRequireDefault(require(\"./UserRoute\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  UserRoute: _UserRoute.default\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyUm91dGUiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxccm91dGVzXFwiLCJzb3VyY2VzIjpbIkluZGV4Um91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXJSb3V0ZSBmcm9tIFwiLi9Vc2VyUm91dGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIFVzZXJSb3V0ZSxcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBb0M7QUFBQSxlQUVyQjtFQUNYQSxTQUFTLEVBQVRBO0FBQ0osQ0FBQztBQUFBIn0=","map":{"version":3,"names":["UserRoute"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\routes\\","sources":["IndexRoute.js"],"sourcesContent":["import UserRoute from \"./UserRoute\";\r\n\r\nexport default {\r\n    UserRoute,\r\n}"],"mappings":";;;;;;AAAA;AAAoC;AAAA,eAErB;EACXA,SAAS,EAATA;AACJ,CAAC;AAAA"}},"mtime":1667551006020},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\UserRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _authJWT = _interopRequireDefault(require(\"../helpers/authJWT\"));\nvar _IndexController = _interopRequireDefault(require(\"../controller/IndexController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst router = (0, _express.Router)();\nrouter.post(\"/signin\", _authJWT.default.authenticate, _authJWT.default.login);\nrouter.post(\"/signup\", _IndexController.default.UserController.signup);\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJwb3N0IiwiYXV0aEpXVCIsImF1dGhlbnRpY2F0ZSIsImxvZ2luIiwiSW5kZXhDb250cm9sbGVyIiwiVXNlckNvbnRyb2xsZXIiLCJzaWdudXAiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxccm91dGVzXFwiLCJzb3VyY2VzIjpbIlVzZXJSb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgYXV0aEpXVCBmcm9tIFwiLi4vaGVscGVycy9hdXRoSldUXCI7XHJcbmltcG9ydCBJbmRleENvbnRyb2xsZXIgZnJvbSBcIi4uL2NvbnRyb2xsZXIvSW5kZXhDb250cm9sbGVyXCI7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5wb3N0KFwiL3NpZ25pblwiLCBhdXRoSldULmF1dGhlbnRpY2F0ZSwgYXV0aEpXVC5sb2dpbik7XHJcbnJvdXRlci5wb3N0KFwiL3NpZ251cFwiLCBJbmRleENvbnRyb2xsZXIuVXNlckNvbnRyb2xsZXIuc2lnbnVwKTtcclxuLy9yb3V0ZXIucG9zdChcIi9yZWZyZXNodG9rZW5cIixhdXRoSldULnJlZnJlc2hUb2tlbilcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUE0RDtBQUU1RCxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsZUFBTSxHQUFFO0FBRXZCRCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUVDLGdCQUFPLENBQUNDLFlBQVksRUFBRUQsZ0JBQU8sQ0FBQ0UsS0FBSyxDQUFDO0FBQzNETCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUVJLHdCQUFlLENBQUNDLGNBQWMsQ0FBQ0MsTUFBTSxDQUFDO0FBQzdEO0FBQUEsZUFFZVIsTUFBTTtBQUFBIn0=","map":{"version":3,"names":["router","Router","post","authJWT","authenticate","login","IndexController","UserController","signup"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\routes\\","sources":["UserRoute.js"],"sourcesContent":["import { Router } from \"express\";\r\nimport authJWT from \"../helpers/authJWT\";\r\nimport IndexController from \"../controller/IndexController\";\r\n\r\nconst router = Router();\r\n\r\nrouter.post(\"/signin\", authJWT.authenticate, authJWT.login);\r\nrouter.post(\"/signup\", IndexController.UserController.signup);\r\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA;AACA;AACA;AAA4D;AAE5D,MAAMA,MAAM,GAAG,IAAAC,eAAM,GAAE;AAEvBD,MAAM,CAACE,IAAI,CAAC,SAAS,EAAEC,gBAAO,CAACC,YAAY,EAAED,gBAAO,CAACE,KAAK,CAAC;AAC3DL,MAAM,CAACE,IAAI,CAAC,SAAS,EAAEI,wBAAe,CAACC,cAAc,CAACC,MAAM,CAAC;AAC7D;AAAA,eAEeR,MAAM;AAAA"}},"mtime":1667550968686},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\authJWT.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _initModels = _interopRequireDefault(require(\"../models/init-models\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst jwt = require('jsonwebtoken');\nconst passport = require('passport');\nconst Strategy = require('passport-local').Strategy;\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt';\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret';\nconst jwtOpts = {\n  algorithm: 'HS256',\n  expiresIn: '30d'\n};\n//passport.use(adminStrategy())\n\npassport.use(new Strategy({\n  usernameField: 'email',\n  passwordField: 'password'\n}, async function (email, password, cb) {\n  try {\n    const result = await _initModels.default.users.findOne({\n      include: [{\n        include: [{\n          model: _initModels.default.roles\n        }],\n        model: _initModels.default.user_roles\n      }],\n      where: {\n        user_email: email\n      }\n    });\n    const {\n      user_name,\n      user_id,\n      user_password,\n      user_email,\n      user_roles: [{\n        role: {\n          role_name\n        }\n      }]\n    } = result.dataValues;\n    const compare = await _bcrypt.default.compare(password, user_password);\n    if (compare) return cb(null, {\n      username: user_name,\n      userId: user_id,\n      email: user_email,\n      userRoles: role_name\n    });\n  } catch (error) {\n    return cb(null, error.message);\n  }\n  cb(null, false);\n}));\nconst authenticate = passport.authenticate('local', {\n  session: false\n});\nmodule.exports = {\n  authenticate,\n  login: login,\n  ensureAdmin: ensureAdmin,\n  ensureSeller: ensureSeller,\n  refreshToken: refreshToken\n};\nasync function login(req, res, next) {\n  const token = await sign({\n    username: req.user.username,\n    roleType: req.user.userRoles\n  });\n  const {\n    userId,\n    username,\n    email,\n    userRoles\n  } = req.user;\n  res.cookie('jwt', token, {\n    httpOnly: true\n  });\n  res.json({\n    profile: {\n      userId,\n      username,\n      email,\n      userRoles\n    },\n    success: true,\n    token: token\n  });\n}\nasync function sign(payload) {\n  const token = await jwt.sign(payload, jwtSecret, jwtOpts);\n  return token;\n}\nasync function ensureSeller(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username) {\n    req.user = payload;\n    if (req.user.roleType === 'Seller') req.isSeller = true;\n    return next();\n  }\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function ensureAdmin(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username === 'admin') return next();\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function verify(jwtString = '') {\n  jwtString = jwtString.replace(/^Bearer /i, '');\n  try {\n    const payload = await jwt.verify(jwtString, jwtSecret);\n    return payload;\n  } catch (err) {\n    err.statusCode = 401;\n    throw err;\n  }\n}\nasync function refreshToken(req, res) {\n  const {\n    refreshToken: requestToken\n  } = req.body;\n  if (requestToken == null) {\n    return res.status(403).json({\n      message: \"Refresh Token is required!\"\n    });\n  }\n  try {\n    const result = await _initModels.default.tokens.findOne({\n      where: {\n        token_id: refreshToken\n      }\n    });\n    if (!refreshToken) {\n      res.status(403).json({\n        message: \"Refresh token is not in database!\"\n      });\n      return;\n    }\n    if (result.token_expire_date.getTime() < new Date().getTime()) {\n      res.status(403).json({\n        message: \"Refresh token was expired. Please make a new signin request\"\n      });\n      return;\n    }\n    let newAccessToken = jwt.sign({\n      id: user.id\n    }, config.secret, {\n      expiresIn: config.jwtExpiration\n    });\n    return res.status(200).json({\n      accessToken: newAccessToken,\n      refreshToken: refreshToken.token\n    });\n  } catch (error) {\n    return res.status(500).send({\n      message: error\n    });\n  }\n}\n\n// function adminStrategy() {\n\n//     return new Strategy(async function (username, password, cb) {\n//         try {\n//             const result = await models.users.findOne({\n//                 where: { user_email: username }\n//             });\n\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\n//             const compare = await bcrypt.compare(password, user_password);\n\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\n//         } catch (error) {\n//             //console.log(error);\n//             return cb(null, error)\n//         }\n\n//         cb(null, false)\n//     })\n// }\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwicGFzc3BvcnQiLCJTdHJhdGVneSIsImp3dFNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiYWRtaW5QYXNzd29yZCIsIkFETUlOX1BBU1NXT1JEIiwiand0T3B0cyIsImFsZ29yaXRobSIsImV4cGlyZXNJbiIsInVzZSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwiZW1haWwiLCJwYXNzd29yZCIsImNiIiwicmVzdWx0IiwibW9kZWxzIiwidXNlcnMiLCJmaW5kT25lIiwiaW5jbHVkZSIsIm1vZGVsIiwicm9sZXMiLCJ1c2VyX3JvbGVzIiwid2hlcmUiLCJ1c2VyX2VtYWlsIiwidXNlcl9uYW1lIiwidXNlcl9pZCIsInVzZXJfcGFzc3dvcmQiLCJyb2xlIiwicm9sZV9uYW1lIiwiZGF0YVZhbHVlcyIsImNvbXBhcmUiLCJiY3J5cHQiLCJ1c2VybmFtZSIsInVzZXJJZCIsInVzZXJSb2xlcyIsImVycm9yIiwibWVzc2FnZSIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJtb2R1bGUiLCJleHBvcnRzIiwibG9naW4iLCJlbnN1cmVBZG1pbiIsImVuc3VyZVNlbGxlciIsInJlZnJlc2hUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJ0b2tlbiIsInNpZ24iLCJ1c2VyIiwicm9sZVR5cGUiLCJjb29raWUiLCJodHRwT25seSIsImpzb24iLCJwcm9maWxlIiwic3VjY2VzcyIsInBheWxvYWQiLCJqd3RTdHJpbmciLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImNvb2tpZXMiLCJ2ZXJpZnkiLCJpc1NlbGxlciIsImVyciIsIkVycm9yIiwic3RhdHVzQ29kZSIsInJlcGxhY2UiLCJyZXF1ZXN0VG9rZW4iLCJib2R5Iiwic3RhdHVzIiwidG9rZW5zIiwidG9rZW5faWQiLCJ0b2tlbl9leHBpcmVfZGF0ZSIsImdldFRpbWUiLCJEYXRlIiwibmV3QWNjZXNzVG9rZW4iLCJpZCIsImNvbmZpZyIsInNlY3JldCIsImp3dEV4cGlyYXRpb24iLCJhY2Nlc3NUb2tlbiIsInNlbmQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxcaGVscGVyc1xcIiwic291cmNlcyI6WyJhdXRoSldULmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXHJcbmNvbnN0IHBhc3Nwb3J0ID0gcmVxdWlyZSgncGFzc3BvcnQnKVxyXG5jb25zdCBTdHJhdGVneSA9IHJlcXVpcmUoJ3Bhc3Nwb3J0LWxvY2FsJykuU3RyYXRlZ3lcclxuXHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcclxuXHJcbmNvbnN0IGp3dFNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ215and0J1xyXG5jb25zdCBhZG1pblBhc3N3b3JkID0gcHJvY2Vzcy5lbnYuQURNSU5fUEFTU1dPUkQgfHwgJ3NlY3JldCdcclxuY29uc3Qgand0T3B0cyA9IHsgYWxnb3JpdGhtOiAnSFMyNTYnLCBleHBpcmVzSW46ICczMGQnIH1cclxuaW1wb3J0IG1vZGVscyBmcm9tICcuLi9tb2RlbHMvaW5pdC1tb2RlbHMnXHJcblxyXG4vL3Bhc3Nwb3J0LnVzZShhZG1pblN0cmF0ZWd5KCkpXHJcblxyXG5wYXNzcG9ydC51c2UobmV3IFN0cmF0ZWd5KHtcclxuICAgIHVzZXJuYW1lRmllbGQ6ICdlbWFpbCcsXHJcbiAgICBwYXNzd29yZEZpZWxkOiAncGFzc3dvcmQnXHJcbn0sXHJcbiAgICBhc3luYyBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkLCBjYikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVscy51c2Vycy5maW5kT25lKHtcclxuICAgICAgICAgICAgICBpbmNsdWRlOlt7aW5jbHVkZTpbe21vZGVsOm1vZGVscy5yb2xlc31dLCBtb2RlbDptb2RlbHMudXNlcl9yb2xlc31dLCAgd2hlcmU6IHsgdXNlcl9lbWFpbDogZW1haWwgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlcl9uYW1lLCB1c2VyX2lkLCB1c2VyX3Bhc3N3b3JkLCB1c2VyX2VtYWlsLHVzZXJfcm9sZXM6W3tyb2xlOntyb2xlX25hbWV9fV19ID0gcmVzdWx0LmRhdGFWYWx1ZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmUgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlcl9wYXNzd29yZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29tcGFyZSkgcmV0dXJuIGNiKG51bGwsIHsgdXNlcm5hbWU6IHVzZXJfbmFtZSwgdXNlcklkOiB1c2VyX2lkLCBlbWFpbDogdXNlcl9lbWFpbCwgdXNlclJvbGVzOiByb2xlX25hbWV9KVxyXG5cclxuXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYihudWxsLCBlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2IobnVsbCwgZmFsc2UpXHJcbiAgICB9XHJcbikpXHJcblxyXG5jb25zdCBhdXRoZW50aWNhdGUgPSBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2xvY2FsJywgeyBzZXNzaW9uOiBmYWxzZSB9KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBhdXRoZW50aWNhdGUsXHJcbiAgICBsb2dpbjogbG9naW4sXHJcbiAgICBlbnN1cmVBZG1pbjogZW5zdXJlQWRtaW4sXHJcbiAgICBlbnN1cmVTZWxsZXI6IGVuc3VyZVNlbGxlcixcclxuICAgIHJlZnJlc2hUb2tlbiA6IHJlZnJlc2hUb2tlblxyXG59XHJcblxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ2luKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHNpZ24oeyB1c2VybmFtZTogcmVxLnVzZXIudXNlcm5hbWUsIHJvbGVUeXBlOiByZXEudXNlci51c2VyUm9sZXMgfSk7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgdXNlcm5hbWUsIGVtYWlsLCB1c2VyUm9sZXMgfSA9IHJlcS51c2VyO1xyXG4gICAgcmVzLmNvb2tpZSgnand0JywgdG9rZW4sIHsgaHR0cE9ubHk6IHRydWUgfSlcclxuXHJcbiAgICByZXMuanNvbih7IHByb2ZpbGU6IHsgdXNlcklkLCB1c2VybmFtZSwgZW1haWwsIHVzZXJSb2xlcyB9LCBzdWNjZXNzOiB0cnVlLCB0b2tlbjogdG9rZW4gfSlcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ24ocGF5bG9hZCkge1xyXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBqd3Quc2lnbihwYXlsb2FkLCBqd3RTZWNyZXQsIGp3dE9wdHMpXHJcbiAgICByZXR1cm4gdG9rZW5cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlU2VsbGVyKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCBqd3RTdHJpbmcgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uIHx8IHJlcS5jb29raWVzLmp3dFxyXG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeShqd3RTdHJpbmcpXHJcbiAgICBpZiAocGF5bG9hZC51c2VybmFtZSkge1xyXG4gICAgICAgIHJlcS51c2VyID0gcGF5bG9hZDtcclxuICAgICAgICBpZiAocmVxLnVzZXIucm9sZVR5cGUgPT09ICdTZWxsZXInKSByZXEuaXNTZWxsZXIgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcclxuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxO1xyXG4gICAgbmV4dChlcnIpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVBZG1pbihyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgY29uc3Qgand0U3RyaW5nID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiB8fCByZXEuY29va2llcy5qd3RcclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnkoand0U3RyaW5nKVxyXG4gICAgaWYgKHBheWxvYWQudXNlcm5hbWUgPT09ICdhZG1pbicpIHJldHVybiBuZXh0KClcclxuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignVW5hdXRob3JpemVkJylcclxuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxXHJcbiAgICBuZXh0KGVycilcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5KGp3dFN0cmluZyA9ICcnKSB7XHJcbiAgICBqd3RTdHJpbmcgPSBqd3RTdHJpbmcucmVwbGFjZSgvXkJlYXJlciAvaSwgJycpXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBqd3QudmVyaWZ5KGp3dFN0cmluZywgand0U2VjcmV0KVxyXG4gICAgICAgIHJldHVybiBwYXlsb2FkXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBlcnIuc3RhdHVzQ29kZSA9IDQwMVxyXG4gICAgICAgIHRocm93IGVyclxyXG4gICAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZWZyZXNoVG9rZW4ocmVxLCByZXMpIHtcclxuICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuOiByZXF1ZXN0VG9rZW4gfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmIChyZXF1ZXN0VG9rZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiUmVmcmVzaCBUb2tlbiBpcyByZXF1aXJlZCFcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVscy50b2tlbnMuZmluZE9uZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IHRva2VuX2lkOiByZWZyZXNoVG9rZW4gfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiUmVmcmVzaCB0b2tlbiBpcyBub3QgaW4gZGF0YWJhc2UhXCIgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHQudG9rZW5fZXhwaXJlX2RhdGUuZ2V0VGltZSgpIDwgbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJSZWZyZXNoIHRva2VuIHdhcyBleHBpcmVkLiBQbGVhc2UgbWFrZSBhIG5ldyBzaWduaW4gcmVxdWVzdFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld0FjY2Vzc1Rva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5pZCB9LCBjb25maWcuc2VjcmV0LCB7XHJcbiAgICAgICAgICAgIGV4cGlyZXNJbjogY29uZmlnLmp3dEV4cGlyYXRpb24sXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IG5ld0FjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbi50b2tlbixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVycm9yIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIGFkbWluU3RyYXRlZ3koKSB7XHJcblxyXG4vLyAgICAgcmV0dXJuIG5ldyBTdHJhdGVneShhc3luYyBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBjYikge1xyXG4vLyAgICAgICAgIHRyeSB7XHJcbi8vICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVscy51c2Vycy5maW5kT25lKHtcclxuLy8gICAgICAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJfZW1haWw6IHVzZXJuYW1lIH1cclxuLy8gICAgICAgICAgICAgfSk7XHJcblxyXG4vLyAgICAgICAgICAgICBjb25zdCB7IHVzZXJfbmFtZSwgdXNlcl9pZCwgdXNlcl9wYXNzd29yZCwgdXNlcl9lbWFpbCwgdXNlcl9yb2xlX3R5cGUgfSA9IHJlc3VsdC5kYXRhVmFsdWVzO1xyXG4vLyAgICAgICAgICAgICBjb25zdCBjb21wYXJlID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXJfcGFzc3dvcmQpO1xyXG5cclxuLy8gICAgICAgICAgICAgaWYgKGNvbXBhcmUpIHJldHVybiBjYihudWxsLCB7IHVzZXJuYW1lOiB1c2VyX25hbWUsIHVzZXJJZDogdXNlcl9pZCwgZW1haWw6IHVzZXJfZW1haWwsIHJvbGVUeXBlOiB1c2VyX3JvbGVfdHlwZSB9KVxyXG4vLyAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyb3IpO1xyXG4vLyAgICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgZXJyb3IpXHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBjYihudWxsLCBmYWxzZSlcclxuLy8gICAgIH0pXHJcbi8vIH0iXSwibWFwcGluZ3MiOiI7O0FBSUE7QUFLQTtBQUEwQztBQVQxQyxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDbkMsTUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU1FLFFB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","map":{"version":3,"names":["jwt","require","passport","Strategy","jwtSecret","process","env","JWT_SECRET","adminPassword","ADMIN_PASSWORD","jwtOpts","algorithm","expiresIn","use","usernameField","passwordField","email","password","cb","result","models","users","findOne","include","model","roles","user_roles","where","user_email","user_name","user_id","user_password","role","role_name","dataValues","compare","bcrypt","username","userId","userRoles","error","message","authenticate","session","module","exports","login","ensureAdmin","ensureSeller","refreshToken","req","res","next","token","sign","user","roleType","cookie","httpOnly","json","profile","success","payload","jwtString","headers","authorization","cookies","verify","isSeller","err","Error","statusCode","replace","requestToken","body","status","tokens","token_id","token_expire_date","getTime","Date","newAccessToken","id","config","secret","jwtExpiration","accessToken","send"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\helpers\\","sources":["authJWT.js"],"sourcesContent":["const jwt = require('jsonwebtoken')\r\nconst passport = require('passport')\r\nconst Strategy = require('passport-local').Strategy\r\n\r\nimport bcrypt from 'bcrypt';\r\n\r\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt'\r\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret'\r\nconst jwtOpts = { algorithm: 'HS256', expiresIn: '30d' }\r\nimport models from '../models/init-models'\r\n\r\n//passport.use(adminStrategy())\r\n\r\npassport.use(new Strategy({\r\n    usernameField: 'email',\r\n    passwordField: 'password'\r\n},\r\n    async function (email, password, cb) {\r\n        try {\r\n            const result = await models.users.findOne({\r\n              include:[{include:[{model:models.roles}], model:models.user_roles}],  where: { user_email: email }\r\n            });\r\n            \r\n            const { user_name, user_id, user_password, user_email,user_roles:[{role:{role_name}}]} = result.dataValues;\r\n            const compare = await bcrypt.compare(password, user_password);\r\n\r\n            if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, userRoles: role_name})\r\n\r\n\r\n\r\n        } catch (error) {\r\n            return cb(null, error.message)\r\n        }\r\n\r\n        cb(null, false)\r\n    }\r\n))\r\n\r\nconst authenticate = passport.authenticate('local', { session: false })\r\n\r\nmodule.exports = {\r\n    authenticate,\r\n    login: login,\r\n    ensureAdmin: ensureAdmin,\r\n    ensureSeller: ensureSeller,\r\n    refreshToken : refreshToken\r\n}\r\n\r\n\r\n\r\nasync function login(req, res, next) {\r\n    const token = await sign({ username: req.user.username, roleType: req.user.userRoles });\r\n    const { userId, username, email, userRoles } = req.user;\r\n    res.cookie('jwt', token, { httpOnly: true })\r\n\r\n    res.json({ profile: { userId, username, email, userRoles }, success: true, token: token })\r\n}\r\n\r\n\r\nasync function sign(payload) {\r\n    const token = await jwt.sign(payload, jwtSecret, jwtOpts)\r\n    return token\r\n}\r\n\r\nasync function ensureSeller(req, res, next) {\r\n    const jwtString = req.headers.authorization || req.cookies.jwt\r\n    const payload = await verify(jwtString)\r\n    if (payload.username) {\r\n        req.user = payload;\r\n        if (req.user.roleType === 'Seller') req.isSeller = true;\r\n        return next();\r\n    }\r\n\r\n    const err = new Error('Unauthorized');\r\n    err.statusCode = 401;\r\n    next(err);\r\n}\r\n\r\nasync function ensureAdmin(req, res, next) {\r\n    const jwtString = req.headers.authorization || req.cookies.jwt\r\n    const payload = await verify(jwtString)\r\n    if (payload.username === 'admin') return next()\r\n    const err = new Error('Unauthorized')\r\n    err.statusCode = 401\r\n    next(err)\r\n}\r\n\r\nasync function verify(jwtString = '') {\r\n    jwtString = jwtString.replace(/^Bearer /i, '')\r\n    try {\r\n        const payload = await jwt.verify(jwtString, jwtSecret)\r\n        return payload\r\n    } catch (err) {\r\n        err.statusCode = 401\r\n        throw err\r\n    }\r\n}\r\n\r\nasync function refreshToken(req, res) {\r\n    const { refreshToken: requestToken } = req.body;\r\n\r\n    if (requestToken == null) {\r\n        return res.status(403).json({ message: \"Refresh Token is required!\" });\r\n    }\r\n\r\n    try {\r\n        const result = await models.tokens.findOne({\r\n            where: { token_id: refreshToken }\r\n        });\r\n\r\n        if (!refreshToken) {\r\n            res.status(403).json({ message: \"Refresh token is not in database!\" });\r\n            return;\r\n        }\r\n\r\n        if (result.token_expire_date.getTime() < new Date().getTime()) {\r\n            res.status(403).json({\r\n                message: \"Refresh token was expired. Please make a new signin request\",\r\n            });\r\n            return;\r\n        }\r\n\r\n        let newAccessToken = jwt.sign({ id: user.id }, config.secret, {\r\n            expiresIn: config.jwtExpiration,\r\n          });\r\n\r\n        return res.status(200).json({\r\n            accessToken: newAccessToken,\r\n            refreshToken: refreshToken.token,\r\n        });\r\n\r\n    } catch (error) {\r\n        return res.status(500).send({ message: error });\r\n    }\r\n\r\n\r\n}\r\n\r\n// function adminStrategy() {\r\n\r\n//     return new Strategy(async function (username, password, cb) {\r\n//         try {\r\n//             const result = await models.users.findOne({\r\n//                 where: { user_email: username }\r\n//             });\r\n\r\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\r\n//             const compare = await bcrypt.compare(password, user_password);\r\n\r\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\r\n//         } catch (error) {\r\n//             //console.log(error);\r\n//             return cb(null, error)\r\n//         }\r\n\r\n//         cb(null, false)\r\n//     })\r\n// }"],"mappings":"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"}},"mtime":1667550059479},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\controller\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\controller\\\\IndexController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _UserController = _interopRequireDefault(require(\"./UserController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  UserController: _UserController.default\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyQ29udHJvbGxlciJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxhZml0clxcT25lRHJpdmVcXERvY3VtZW50c1xcdGVzdG5vZGVqc1xcc2VydmVyXFxjb250cm9sbGVyXFwiLCJzb3VyY2VzIjpbIkluZGV4Q29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlckNvbnRyb2xsZXIgZnJvbSBcIi4vVXNlckNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIFVzZXJDb250cm9sbGVyLFxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUE4QztBQUFBLGVBRS9CO0VBQ1hBLGNBQWMsRUFBZEE7QUFDSixDQUFDO0FBQUEifQ==","map":{"version":3,"names":["UserController"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\controller\\","sources":["IndexController.js"],"sourcesContent":["import UserController from \"./UserController\";\r\n\r\nexport default {\r\n    UserController,\r\n}"],"mappings":";;;;;;AAAA;AAA8C;AAAA,eAE/B;EACXA,cAAc,EAAdA;AACJ,CAAC;AAAA"}},"mtime":1667550913120},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\controller\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\controller\\\\UserController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst SALT_ROUND = 10;\nconst signup = async (req, res) => {\n  const {\n    username,\n    email,\n    password,\n    handphone\n  } = req.body;\n  let hashPassword = password;\n  hashPassword = await _bcrypt.default.hash(hashPassword, SALT_ROUND);\n  try {\n    const result = await req.context.models.users.create({\n      user_name: username,\n      user_email: email,\n      user_password: hashPassword,\n      user_handphone: handphone\n    });\n    const {\n      user_name,\n      user_email\n    } = result.dataValues;\n    res.send({\n      user_name,\n      user_email\n    });\n  } catch (error) {\n    res.status(404).send(error.message);\n  }\n\n  /*  test dulu   \r\n  \r\n  let userPassword = user_password\r\n  userPassword = await bcrypt.hash(userPassword,SALT_ROUND);\r\n  console.log(userPassword);\r\n        console.log(await bcrypt.compare(\"rahasia\",userPassword));\r\n  console.log(await bcrypt.compare(\"rahasiax\",userPassword)); */\n};\n\n// use sigin with token in authJWT\nconst signin = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n  try {\n    const result = await req.context.models.users.findOne({\n      where: {\n        user_email: email\n      }\n    });\n    const {\n      user_name,\n      user_email,\n      user_password\n    } = result.dataValues;\n    const compare = await _bcrypt.default.compare(password, user_password);\n    if (compare) {\n      return res.send({\n        user_name,\n        user_email\n      });\n    } else {\n      return res.sendStatus(404);\n    }\n  } catch (error) {\n    return res.sendStatus(404);\n  }\n};\nconst all = async (req, res) => {\n  try {\n    const result = await req.context.models.users.findAll();\n    return res.status(201).json({\n      result\n    });\n  } catch (error) {\n    return res.status(404).send(\"no data found\");\n  }\n};\nvar _default = {\n  signup,\n  signin,\n  all\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTQUxUX1JPVU5EIiwic2lnbnVwIiwicmVxIiwicmVzIiwidXNlcm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaGFuZHBob25lIiwiYm9keSIsImhhc2hQYXNzd29yZCIsImJjcnlwdCIsImhhc2giLCJyZXN1bHQiLCJjb250ZXh0IiwibW9kZWxzIiwidXNlcnMiLCJjcmVhdGUiLCJ1c2VyX25hbWUiLCJ1c2VyX2VtYWlsIiwidXNlcl9wYXNzd29yZCIsInVzZXJfaGFuZHBob25lIiwiZGF0YVZhbHVlcyIsInNlbmQiLCJlcnJvciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJzaWduaW4iLCJmaW5kT25lIiwid2hlcmUiLCJjb21wYXJlIiwic2VuZFN0YXR1cyIsImFsbCIsImZpbmRBbGwiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGFmaXRyXFxPbmVEcml2ZVxcRG9jdW1lbnRzXFx0ZXN0bm9kZWpzXFxzZXJ2ZXJcXGNvbnRyb2xsZXJcXCIsInNvdXJjZXMiOlsiVXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xyXG5jb25zdCBTQUxUX1JPVU5EID0gMTA7XHJcblxyXG5jb25zdCBzaWdudXAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgdXNlcm5hbWUsZW1haWwsIHBhc3N3b3JkLGhhbmRwaG9uZSB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgbGV0IGhhc2hQYXNzd29yZCA9IHBhc3N3b3JkO1xyXG4gICAgaGFzaFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goaGFzaFBhc3N3b3JkLCBTQUxUX1JPVU5EKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxLmNvbnRleHQubW9kZWxzLnVzZXJzLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIHVzZXJfbmFtZSA6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICB1c2VyX2VtYWlsIDogZW1haWwsXHJcbiAgICAgICAgICAgIHVzZXJfcGFzc3dvcmQ6IGhhc2hQYXNzd29yZCxcclxuICAgICAgICAgICAgdXNlcl9oYW5kcGhvbmUgOiBoYW5kcGhvbmVcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB7dXNlcl9uYW1lLHVzZXJfZW1haWx9ID0gcmVzdWx0LmRhdGFWYWx1ZXM7XHJcbiAgICAgICAgcmVzLnNlbmQoe3VzZXJfbmFtZSx1c2VyX2VtYWlsfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgICAgICAvKiAgdGVzdCBkdWx1ICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHVzZXJQYXNzd29yZCA9IHVzZXJfcGFzc3dvcmRcclxuICAgICAgICB1c2VyUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh1c2VyUGFzc3dvcmQsU0FMVF9ST1VORCk7XHJcbiAgICAgICAgY29uc29sZS5sb2codXNlclBhc3N3b3JkKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGF3YWl0IGJjcnlwdC5jb21wYXJlKFwicmFoYXNpYVwiLHVzZXJQYXNzd29yZCkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGF3YWl0IGJjcnlwdC5jb21wYXJlKFwicmFoYXNpYXhcIix1c2VyUGFzc3dvcmQpKTsgKi9cclxufVxyXG5cclxuLy8gdXNlIHNpZ2luIHdpdGggdG9rZW4gaW4gYXV0aEpXVFxyXG5jb25zdCBzaWduaW4gPSBhc3luYyhyZXEscmVzKT0+e1xyXG4gICAgY29uc3Qge2VtYWlsLHBhc3N3b3JkfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxLmNvbnRleHQubW9kZWxzLnVzZXJzLmZpbmRPbmUoe1xyXG4gICAgICAgICAgICB3aGVyZSA6IHt1c2VyX2VtYWlsIDogZW1haWx9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qge3VzZXJfbmFtZSx1c2VyX2VtYWlsLHVzZXJfcGFzc3dvcmR9ID0gcmVzdWx0LmRhdGFWYWx1ZXM7XHJcbiAgICAgICAgY29uc3QgY29tcGFyZSA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLHVzZXJfcGFzc3dvcmQpO1xyXG4gICAgICAgIGlmKGNvbXBhcmUpe1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoe3VzZXJfbmFtZSx1c2VyX2VtYWlsfSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZFN0YXR1cyg0MDQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDQwNCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGFsbCA9IGFzeW5jIChyZXEscmVzKSA9PntcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ICA9IGF3YWl0IHJlcS5jb250ZXh0Lm1vZGVscy51c2Vycy5maW5kQWxsKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtyZXN1bHR9KVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoXCJubyBkYXRhIGZvdW5kXCIpICAgICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBzaWdudXAsXHJcbiAgICBzaWduaW4sXHJcbiAgICBhbGxcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBNEI7QUFDNUIsTUFBTUEsVUFBVSxHQUFHLEVBQUU7QUFFckIsTUFBTUMsTUFBTSxHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQy9CLE1BQU07SUFBRUMsUUFBUTtJQUFDQyxL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","map":{"version":3,"names":["SALT_ROUND","signup","req","res","username","email","password","handphone","body","hashPassword","bcrypt","hash","result","context","models","users","create","user_name","user_email","user_password","user_handphone","dataValues","send","error","status","message","signin","findOne","where","compare","sendStatus","all","findAll","json"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\controller\\","sources":["UserController.js"],"sourcesContent":["import bcrypt from 'bcrypt';\r\nconst SALT_ROUND = 10;\r\n\r\nconst signup = async (req, res) => {\r\n    const { username,email, password,handphone } = req.body;\r\n\r\n    let hashPassword = password;\r\n    hashPassword = await bcrypt.hash(hashPassword, SALT_ROUND);\r\n    try {\r\n        const result = await req.context.models.users.create({\r\n            user_name : username,\r\n            user_email : email,\r\n            user_password: hashPassword,\r\n            user_handphone : handphone\r\n        });\r\n        const {user_name,user_email} = result.dataValues;\r\n        res.send({user_name,user_email});\r\n    } catch (error) {\r\n        res.status(404).send(error.message);\r\n    }\r\n\r\n        /*  test dulu   \r\n        \r\n        let userPassword = user_password\r\n        userPassword = await bcrypt.hash(userPassword,SALT_ROUND);\r\n        console.log(userPassword);\r\n    \r\n        console.log(await bcrypt.compare(\"rahasia\",userPassword));\r\n        console.log(await bcrypt.compare(\"rahasiax\",userPassword)); */\r\n}\r\n\r\n// use sigin with token in authJWT\r\nconst signin = async(req,res)=>{\r\n    const {email,password} = req.body;\r\n\r\n    try {\r\n        const result = await req.context.models.users.findOne({\r\n            where : {user_email : email}\r\n        });\r\n        const {user_name,user_email,user_password} = result.dataValues;\r\n        const compare = await bcrypt.compare(password,user_password);\r\n        if(compare){\r\n            return res.send({user_name,user_email});\r\n        }else{\r\n            return res.sendStatus(404);\r\n        }\r\n        \r\n    } catch (error) {\r\n        return res.sendStatus(404);\r\n    }\r\n}\r\n\r\nconst all = async (req,res) =>{\r\n    try {\r\n        const result  = await req.context.models.users.findAll();\r\n        return res.status(201).json({result})\r\n    } catch (error) {\r\n        return res.status(404).send(\"no data found\")       \r\n    }\r\n}\r\n\r\nexport default {\r\n    signup,\r\n    signin,\r\n    all\r\n}"],"mappings":";;;;;;AAAA;AAA4B;AAC5B,MAAMA,UAAU,GAAG,EAAE;AAErB,MAAMC,MAAM,GAAG,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC/B,MAAM;IAAEC,QAAQ;IAACC,KAAK;IAAEC,QAAQ;IAACC;EAAU,CAAC,GAAGL,GAAG,CAACM,IAAI;EAEvD,IAAIC,YAAY,GAAGH,QAAQ;EAC3BG,YAAY,GAAG,MAAMC,eAAM,CAACC,IAAI,CAACF,YAAY,EAAET,UAAU,CAAC;EAC1D,IAAI;IACA,MAAMY,MAAM,GAAG,MAAMV,GAAG,CAACW,OAAO,CAACC,MAAM,CAACC,KAAK,CAACC,MAAM,CAAC;MACjDC,SAAS,EAAGb,QAAQ;MACpBc,UAAU,EAAGb,KAAK;MAClBc,aAAa,EAAEV,YAAY;MAC3BW,cAAc,EAAGb;IACrB,CAAC,CAAC;IACF,MAAM;MAACU,SAAS;MAACC;IAAU,CAAC,GAAGN,MAAM,CAACS,UAAU;IAChDlB,GAAG,CAACmB,IAAI,CAAC;MAACL,SAAS;MAACC;IAAU,CAAC,CAAC;EACpC,CAAC,CAAC,OAAOK,KAAK,EAAE;IACZpB,GAAG,CAACqB,MAAM,CAAC,GAAG,CAAC,CAACF,IAAI,CAACC,KAAK,CAACE,OAAO,CAAC;EACvC;;EAEI;AACR;AACA;AACA;AACA;AACA;AACA;AAEA,CAAC;;AAED;AACA,MAAMC,MAAM,GAAG,OAAMxB,GAAG,EAACC,GAAG,KAAG;EAC3B,MAAM;IAACE,KAAK;IAACC;EAAQ,CAAC,GAAGJ,GAAG,CAACM,IAAI;EAEjC,IAAI;IACA,MAAMI,MAAM,GAAG,MAAMV,GAAG,CAACW,OAAO,CAACC,MAAM,CAACC,KAAK,CAACY,OAAO,CAAC;MAClDC,KAAK,EAAG;QAACV,UAAU,EAAGb;MAAK;IAC/B,CAAC,CAAC;IACF,MAAM;MAACY,SAAS;MAACC,UAAU;MAACC;IAAa,CAAC,GAAGP,MAAM,CAACS,UAAU;IAC9D,MAAMQ,OAAO,GAAG,MAAMnB,eAAM,CAACmB,OAAO,CAACvB,QAAQ,EAACa,aAAa,CAAC;IAC5D,IAAGU,OAAO,EAAC;MACP,OAAO1B,GAAG,CAACmB,IAAI,CAAC;QAACL,SAAS;QAACC;MAAU,CAAC,CAAC;IAC3C,CAAC,MAAI;MACD,OAAOf,GAAG,CAAC2B,UAAU,CAAC,GAAG,CAAC;IAC9B;EAEJ,CAAC,CAAC,OAAOP,KAAK,EAAE;IACZ,OAAOpB,GAAG,CAAC2B,UAAU,CAAC,GAAG,CAAC;EAC9B;AACJ,CAAC;AAED,MAAMC,GAAG,GAAG,OAAO7B,GAAG,EAACC,GAAG,KAAI;EAC1B,IAAI;IACA,MAAMS,MAAM,GAAI,MAAMV,GAAG,CAACW,OAAO,CAACC,MAAM,CAACC,KAAK,CAACiB,OAAO,EAAE;IACxD,OAAO7B,GAAG,CAACqB,MAAM,CAAC,GAAG,CAAC,CAACS,IAAI,CAAC;MAACrB;IAAM,CAAC,CAAC;EACzC,CAAC,CAAC,OAAOW,KAAK,EAAE;IACZ,OAAOpB,GAAG,CAACqB,MAAM,CAAC,GAAG,CAAC,CAACF,IAAI,CAAC,eAAe,CAAC;EAChD;AACJ,CAAC;AAAA,eAEc;EACXrB,MAAM;EACNyB,MAAM;EACNK;AACJ,CAAC;AAAA"}},"mtime":1667554833094},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst pinoNoir = require('pino-noir');\nconst pinoLogger = require('express-pino-logger');\nconst {\n  STATUS_CODES\n} = require('http');\nconst logger = () => {\n  return pinoLogger({\n    serializers: pinoNoir(['res.headers.set-cookie', 'req.headers.cookie', 'req.headers.authorization'])\n  });\n};\nconst handleError = (err, req, res, next) => {\n  console.error(err);\n  if (res.headersSent) return next(err);\n  const statusCode = err.statusCode || 500;\n  const errorMessage = STATUS_CODES[statusCode] || 'Internal Error';\n  res.status(statusCode).json({\n    error: errorMessage\n  });\n};\nconst notFound = (req, res) => {\n  res.status(404).json({\n    error: 'Not Found'\n  });\n};\nconst forbidden = next => {\n  const err = new Error(\"Forbidden\");\n  err.statusCode = 403;\n  return next(err);\n};\nconst cors = (req, res, next) => {\n  const origin = req.headers.origin;\n  res.setHeader('Access-Control-Allow-Origin', origin || '*');\n  res.setHeader('Access-Control-Allow-Methods', 'POST, GET, PUT, DELETE, OPTIONS, XMODIFY');\n  res.setHeader('Access-Control-Allow-Credentials', 'true');\n  res.setHeader('Access-Control-Max-Age', '86400');\n  res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept');\n  next();\n};\nvar _default = {\n  logger: logger(),\n  cors,\n  notFound,\n  handleError,\n  forbidden\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaW5vTm9pciIsInJlcXVpcmUiLCJwaW5vTG9nZ2VyIiwiU1RBVFVTX0NPREVTIiwibG9nZ2VyIiwic2VyaWFsaXplcnMiLCJoYW5kbGVFcnJvciIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJjb25zb2xlIiwiZXJyb3IiLCJoZWFkZXJzU2VudCIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXMiLCJqc29uIiwibm90Rm91bmQiLCJmb3JiaWRkZW4iLCJFcnJvciIsImNvcnMiLCJvcmlnaW4iLCJoZWFkZXJzIiwic2V0SGVhZGVyIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXGFmaXRyXFxPbmVEcml2ZVxcRG9jdW1lbnRzXFx0ZXN0bm9kZWpzXFxzZXJ2ZXJcXGhlbHBlcnNcXCIsInNvdXJjZXMiOlsibWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwaW5vTm9pciA9IHJlcXVpcmUoJ3Bpbm8tbm9pcicpXHJcbmNvbnN0IHBpbm9Mb2dnZXIgPSByZXF1aXJlKCdleHByZXNzLXBpbm8tbG9nZ2VyJylcclxuY29uc3QgeyBTVEFUVVNfQ09ERVMgfSA9IHJlcXVpcmUoJ2h0dHAnKVxyXG5cclxuXHJcblxyXG5jb25zdCBsb2dnZXI9KCk9PiB7XHJcbiAgICByZXR1cm4gcGlub0xvZ2dlcih7XHJcbiAgICAgICAgc2VyaWFsaXplcnM6IHBpbm9Ob2lyKFtcclxuICAgICAgICAgICAgJ3Jlcy5oZWFkZXJzLnNldC1jb29raWUnLFxyXG4gICAgICAgICAgICAncmVxLmhlYWRlcnMuY29va2llJyxcclxuICAgICAgICAgICAgJ3JlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24nXHJcbiAgICAgICAgXSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZUVycm9yPShlcnIsIHJlcSwgcmVzLCBuZXh0KT0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxyXG4gICAgaWYgKHJlcy5oZWFkZXJzU2VudCkgcmV0dXJuIG5leHQoZXJyKVxyXG4gICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVyci5zdGF0dXNDb2RlIHx8IDUwMFxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gU1RBVFVTX0NPREVTW3N0YXR1c0NvZGVdIHx8ICdJbnRlcm5hbCBFcnJvcidcclxuICAgIHJlcy5zdGF0dXMoc3RhdHVzQ29kZSkuanNvbih7IGVycm9yOiBlcnJvck1lc3NhZ2UgfSlcclxufVxyXG5cclxuY29uc3Qgbm90Rm91bmQ9KHJlcSwgcmVzKT0+IHtcclxuICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgRm91bmQnIH0pXHJcbn1cclxuXHJcbmNvbnN0IGZvcmJpZGRlbj0obmV4dCk9PntcclxuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcIkZvcmJpZGRlblwiKVxyXG4gICAgZXJyLnN0YXR1c0NvZGUgPSA0MDM7XHJcbiAgICByZXR1cm4gbmV4dChlcnIpXHJcbn1cclxuXHJcbmNvbnN0IGNvcnM9KHJlcSwgcmVzLCBuZXh0KT0+IHtcclxuICAgIGNvbnN0IG9yaWdpbiA9IHJlcS5oZWFkZXJzLm9yaWdpblxyXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgb3JpZ2luIHx8ICcqJylcclxuICAgIHJlcy5zZXRIZWFkZXIoXHJcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLFxyXG4gICAgICAgICdQT1NULCBHRVQsIFBVVCwgREVMRVRFLCBPUFRJT05TLCBYTU9ESUZZJ1xyXG4gICAgKVxyXG4gICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpXHJcbiAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1NYXgtQWdlJywgJzg2NDAwJylcclxuICAgIHJlcy5zZXRIZWFkZXIoXHJcbiAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLFxyXG4gICAgICAgICdYLVJlcXVlc3RlZC1XaXRoLCBYLUhUVFAtTWV0aG9kLU92ZXJyaWRlLCBDb250ZW50LVR5cGUsIEFjY2VwdCdcclxuXHJcbiAgICApXHJcbiAgICBuZXh0KClcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIGxvZ2dlcjogbG9nZ2VyKCksXHJcbiAgICBjb3JzLFxyXG4gICAgbm90Rm91bmQsXHJcbiAgICBoYW5kbGVFcnJvcixcclxuICAgIGZvcmJpZGRlblxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDckMsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMscUJBQXFCLENBQUM7QUFDakQsTUFBTTtFQUFFRTtBQUFhLENBQUMsR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUl4QyxNQUFNRyxNQUFNLEdBQUMsTUFBSztFQUNkLE9BQU9GLFVBQVUsQ0FBQztJQUNkRyxXQUFXLEVBQUVMLFFBQVEsQ0FBQyxDQUNsQix3QkFBd0IsRUFDeEIsb0JBQW9CLEVBQ3BCLDJCQUEyQixDQUM5QjtFQUNMLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRCxNQUFNTSxXQUFXLEdBQUMsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFJO0VBQ3RDQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0wsR0FBRyxDQUFDO0VBQ2xCLElBQUlFLEdBQUcsQ0FBQ0ksV0FBVyxFQUFFLE9BQU9ILElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ3JDLE1BQU1PLFVBQVUsR0FBR1AsR0FBRyxDQUFDTyxVQUFVLElBQUksR0FBRztFQUN4QyxNQUFNQyxZQUFZLEdBQUdaLFlBQVksQ0FBQ1csVUFBVSxDQUFDLElBQUksZ0JBQWdCO0VBQ2pFTCxHQUFHLENBQUNPLE1BQU0sQ0FBQ0YsVUFBVSxDQUFDLENBQUNHLElBQUksQ0FBQztJQUFFTCxLQUFLLEVBQUVHO0VBQWEsQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFFRCxNQUFNRyxRQUFRLEdBQUMsQ0FBQ1YsR0FBRyxFQUFFQyxHQUFHLEtBQUk7RUFDeEJBLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7SUFBRUwsS0FBSyxFQUFFO0VBQVksQ0FBQyxDQUFDO0FBQ2hELENBQUM7QUFFRCxNQUFNTyxTQUFTLEdBQUVULElBQUksSUFBRztFQUNwQixNQUFNSCxHQUFHLEdBQUcsSUFBSWEsS0FBSyxDQUFDLFdBQVcsQ0FBQztFQUNsQ2IsR0FBRyxDQUFDTyxVQUFVLEdBQUcsR0FBRztFQUNwQixPQUFPSixJQUFJLENBQUNILEdBQUcsQ0FBQztBQUNwQixDQUFDO0FBRUQsTUFBTWMsSUFBSSxHQUFDLENBQUNiLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUk7RUFDMUIsTUFBTVksTUFBTSxHQUFHZCxHQUFHLENBQUNlLE9BQU8sQ0FBQ0QsTUFBTTtFQUNqQ2IsR0FBRyxDQUFDZSxTQUFTLENBQUMsNkJBQTZCLEVBQUVGLE1BQU0sSUFBSSxHQUFHLENBQUM7RUFDM0RiLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QiwwQ0FBMEMsQ0FDN0M7RUFDRGYsR0FBRyxDQUFDZSxTQUFTLENBQUMsa0NBQWtDLEVBQUUsTUFBTSxDQUFDO0VBQ3pEZixHQUFHLENBQUNlLFNBQVMsQ0FBQyx3QkFBd0IsRUFBRSxPQUFPLENBQUM7RUFDaERmLEdBQUcsQ0FBQ2UsU0FBUyxDQUNULDhCQUE4QixFQUM5QixnRUFBZ0UsQ0FFbkU7RUFDRGQsSUFBSSxFQUFFO0FBQ1YsQ0FBQztBQUFBLGVBR2M7RUFDWE4sTUFBTSxFQUFFQSxNQUFNLEVBQUU7RUFDaEJpQixJQUFJO0VBQ0pILFFBQVE7RUFDUlosV0FBVztFQUNYYTtBQUNKLENBQUM7QUFBQSJ9","map":{"version":3,"names":["pinoNoir","require","pinoLogger","STATUS_CODES","logger","serializers","handleError","err","req","res","next","console","error","headersSent","statusCode","errorMessage","status","json","notFound","forbidden","Error","cors","origin","headers","setHeader"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\helpers\\","sources":["middleware.js"],"sourcesContent":["const pinoNoir = require('pino-noir')\r\nconst pinoLogger = require('express-pino-logger')\r\nconst { STATUS_CODES } = require('http')\r\n\r\n\r\n\r\nconst logger=()=> {\r\n    return pinoLogger({\r\n        serializers: pinoNoir([\r\n            'res.headers.set-cookie',\r\n            'req.headers.cookie',\r\n            'req.headers.authorization'\r\n        ])\r\n    })\r\n}\r\n\r\nconst handleError=(err, req, res, next)=> {\r\n    console.error(err)\r\n    if (res.headersSent) return next(err)\r\n    const statusCode = err.statusCode || 500\r\n    const errorMessage = STATUS_CODES[statusCode] || 'Internal Error'\r\n    res.status(statusCode).json({ error: errorMessage })\r\n}\r\n\r\nconst notFound=(req, res)=> {\r\n    res.status(404).json({ error: 'Not Found' })\r\n}\r\n\r\nconst forbidden=(next)=>{\r\n    const err = new Error(\"Forbidden\")\r\n    err.statusCode = 403;\r\n    return next(err)\r\n}\r\n\r\nconst cors=(req, res, next)=> {\r\n    const origin = req.headers.origin\r\n    res.setHeader('Access-Control-Allow-Origin', origin || '*')\r\n    res.setHeader(\r\n        'Access-Control-Allow-Methods',\r\n        'POST, GET, PUT, DELETE, OPTIONS, XMODIFY'\r\n    )\r\n    res.setHeader('Access-Control-Allow-Credentials', 'true')\r\n    res.setHeader('Access-Control-Max-Age', '86400')\r\n    res.setHeader(\r\n        'Access-Control-Allow-Headers',\r\n        'X-Requested-With, X-HTTP-Method-Override, Content-Type, Accept'\r\n\r\n    )\r\n    next()\r\n}\r\n\r\n\r\nexport default {\r\n    logger: logger(),\r\n    cors,\r\n    notFound,\r\n    handleError,\r\n    forbidden\r\n}"],"mappings":";;;;;;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,WAAW,CAAC;AACrC,MAAMC,UAAU,GAAGD,OAAO,CAAC,qBAAqB,CAAC;AACjD,MAAM;EAAEE;AAAa,CAAC,GAAGF,OAAO,CAAC,MAAM,CAAC;AAIxC,MAAMG,MAAM,GAAC,MAAK;EACd,OAAOF,UAAU,CAAC;IACdG,WAAW,EAAEL,QAAQ,CAAC,CAClB,wBAAwB,EACxB,oBAAoB,EACpB,2BAA2B,CAC9B;EACL,CAAC,CAAC;AACN,CAAC;AAED,MAAMM,WAAW,GAAC,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EACtCC,OAAO,CAACC,KAAK,CAACL,GAAG,CAAC;EAClB,IAAIE,GAAG,CAACI,WAAW,EAAE,OAAOH,IAAI,CAACH,GAAG,CAAC;EACrC,MAAMO,UAAU,GAAGP,GAAG,CAACO,UAAU,IAAI,GAAG;EACxC,MAAMC,YAAY,GAAGZ,YAAY,CAACW,UAAU,CAAC,IAAI,gBAAgB;EACjEL,GAAG,CAACO,MAAM,CAACF,UAAU,CAAC,CAACG,IAAI,CAAC;IAAEL,KAAK,EAAEG;EAAa,CAAC,CAAC;AACxD,CAAC;AAED,MAAMG,QAAQ,GAAC,CAACV,GAAG,EAAEC,GAAG,KAAI;EACxBA,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEL,KAAK,EAAE;EAAY,CAAC,CAAC;AAChD,CAAC;AAED,MAAMO,SAAS,GAAET,IAAI,IAAG;EACpB,MAAMH,GAAG,GAAG,IAAIa,KAAK,CAAC,WAAW,CAAC;EAClCb,GAAG,CAACO,UAAU,GAAG,GAAG;EACpB,OAAOJ,IAAI,CAACH,GAAG,CAAC;AACpB,CAAC;AAED,MAAMc,IAAI,GAAC,CAACb,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAI;EAC1B,MAAMY,MAAM,GAAGd,GAAG,CAACe,OAAO,CAACD,MAAM;EACjCb,GAAG,CAACe,SAAS,CAAC,6BAA6B,EAAEF,MAAM,IAAI,GAAG,CAAC;EAC3Db,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,0CAA0C,CAC7C;EACDf,GAAG,CAACe,SAAS,CAAC,kCAAkC,EAAE,MAAM,CAAC;EACzDf,GAAG,CAACe,SAAS,CAAC,wBAAwB,EAAE,OAAO,CAAC;EAChDf,GAAG,CAACe,SAAS,CACT,8BAA8B,EAC9B,gEAAgE,CAEnE;EACDd,IAAI,EAAE;AACV,CAAC;AAAA,eAGc;EACXN,MAAM,EAAEA,MAAM,EAAE;EAChBiB,IAAI;EACJH,QAAQ;EACRZ,WAAW;EACXa;AACJ,CAAC;AAAA"}},"mtime":1667550111059},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\init-models.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sequelize = exports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nvar _users2 = _interopRequireDefault(require(\"./users.js\"));\nvar _config = _interopRequireDefault(require(\"../config/config.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst DataTypes = _sequelize2.default.DataTypes;\nconst sequelize = new _sequelize2.default(_config.default.db_name, _config.default.db_username, _config.default.db_password, {\n  dialect: \"postgres\",\n  pool: {\n    max: 5,\n    min: 0,\n    acquire: 30000,\n    idle: 10000\n  }\n});\nexports.sequelize = sequelize;\nconst initModels = sequelize => {\n  const users = _users2.default.init(sequelize, DataTypes);\n  return {\n    users\n  };\n};\nconst models = initModels(sequelize);\nvar _default = models;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJfc2VxdWVsaXplIiwic2VxdWVsaXplIiwiU2VxdWVsaXplIiwiY29uZmlnIiwiZGJfbmFtZSIsImRiX3VzZXJuYW1lIiwiZGJfcGFzc3dvcmQiLCJkaWFsZWN0IiwicG9vbCIsIm1heCIsIm1pbiIsImFjcXVpcmUiLCJpZGxlIiwiaW5pdE1vZGVscyIsInVzZXJzIiwiX3VzZXJzIiwiaW5pdCIsIm1vZGVscyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxhZml0clxcT25lRHJpdmVcXERvY3VtZW50c1xcdGVzdG5vZGVqc1xcc2VydmVyXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsiaW5pdC1tb2RlbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5pbXBvcnQgX3NlcXVlbGl6ZSBmcm9tIFwic2VxdWVsaXplXCI7XG5jb25zdCBEYXRhVHlwZXMgPSBfc2VxdWVsaXplLkRhdGFUeXBlcztcbmltcG9ydCBfdXNlcnMgZnJvbSAgXCIuL3VzZXJzLmpzXCI7XG5cbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9jb25maWcuanNcIjtcblxuY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShcbmNvbmZpZy5kYl9uYW1lLFxuY29uZmlnLmRiX3VzZXJuYW1lLFxuY29uZmlnLmRiX3Bhc3N3b3JkLFxue1xuICBkaWFsZWN0IDogXCJwb3N0Z3Jlc1wiLFxuICBwb29sIDoge1xuICAgIG1heCA6IDUsXG4gICAgbWluIDogMCxcbiAgICBhY3F1aXJlIDogMzAwMDAsXG4gICAgaWRsZSA6IDEwMDAwLFxuICB9XG59XG4pXG5cbmNvbnN0IGluaXRNb2RlbHMgPSAoc2VxdWVsaXplKSA9PiB7XG4gIGNvbnN0IHVzZXJzID0gX3VzZXJzLmluaXQoc2VxdWVsaXplLCBEYXRhVHlwZXMpO1xuXG5cbiAgcmV0dXJuIHtcbiAgICB1c2VycyxcbiAgfTtcbn1cblxuY29uc3QgbW9kZWxzID0gaW5pdE1vZGVscyhzZXF1ZWxpemUpO1xuXG5leHBvcnQgZGVmYXVsdCBtb2RlbHM7XG5leHBvcnQge3NlcXVlbGl6ZX07Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUdBO0FBRUE7QUFBeUM7QUFIekMsTUFBTUEsU0FBUyxHQUFHQyxtQkFBVSxDQUFDRCxTQUFTO0FBS3RDLE1BQU1FLFNBQVMsR0FBRyxJQUFJQyxtQkFBUyxDQUMvQkMsZUFBTSxDQUFDQyxPQUFPLEVBQ2RELGVBQU0sQ0FBQ0UsV0FBVyxFQUNsQkYsZUFBTSxDQUFDRyxXQUFXLEVBQ2xCO0VBQ0VDLE9BQU8sRUFBRyxVQUFVO0VBQ3BCQyxJQUFJLEVBQUc7SUFDTEMsR0FBRyxFQUFHLENBQUM7SUFDUEMsR0FBRyxFQUFHLENBQUM7SUFDUEMsT0FBTyxFQUFHLEtBQUs7SUFDZkMsSUFBSSxFQUFHO0VBQ1Q7QUFDRixDQUFDLENBQ0E7QUFBQTtBQUVELE1BQU1DLFVBQVUsR0FBSVosU0FBUyxJQUFLO0VBQ2hDLE1BQU1hLEtBQUssR0FBR0MsZUFBTSxDQUFDQyxJQUFJLENBQUNmLFNBQVMsRUFBRUYsU0FBUyxDQUFDO0VBRy9DLE9BQU87SUFDTGU7RUFDRixDQUFDO0FBQ0gsQ0FBQztBQUVELE1BQU1HLE1BQU0sR0FBR0osVUFBVSxDQUFDWixTQUFTLENBQUM7QUFBQyxlQUV0QmdCLE1BQU07QUFBQSJ9","map":{"version":3,"names":["DataTypes","_sequelize","sequelize","Sequelize","config","db_name","db_username","db_password","dialect","pool","max","min","acquire","idle","initModels","users","_users","init","models"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\models\\","sources":["init-models.js"],"sourcesContent":["import Sequelize from \"sequelize\";\nimport _sequelize from \"sequelize\";\nconst DataTypes = _sequelize.DataTypes;\nimport _users from  \"./users.js\";\n\nimport config from \"../config/config.js\";\n\nconst sequelize = new Sequelize(\nconfig.db_name,\nconfig.db_username,\nconfig.db_password,\n{\n  dialect : \"postgres\",\n  pool : {\n    max : 5,\n    min : 0,\n    acquire : 30000,\n    idle : 10000,\n  }\n}\n)\n\nconst initModels = (sequelize) => {\n  const users = _users.init(sequelize, DataTypes);\n\n\n  return {\n    users,\n  };\n}\n\nconst models = initModels(sequelize);\n\nexport default models;\nexport {sequelize};"],"mappings":";;;;;;AAAA;AAGA;AAEA;AAAyC;AAHzC,MAAMA,SAAS,GAAGC,mBAAU,CAACD,SAAS;AAKtC,MAAME,SAAS,GAAG,IAAIC,mBAAS,CAC/BC,eAAM,CAACC,OAAO,EACdD,eAAM,CAACE,WAAW,EAClBF,eAAM,CAACG,WAAW,EAClB;EACEC,OAAO,EAAG,UAAU;EACpBC,IAAI,EAAG;IACLC,GAAG,EAAG,CAAC;IACPC,GAAG,EAAG,CAAC;IACPC,OAAO,EAAG,KAAK;IACfC,IAAI,EAAG;EACT;AACF,CAAC,CACA;AAAA;AAED,MAAMC,UAAU,GAAIZ,SAAS,IAAK;EAChC,MAAMa,KAAK,GAAGC,eAAM,CAACC,IAAI,CAACf,SAAS,EAAEF,SAAS,CAAC;EAG/C,OAAO;IACLe;EACF,CAAC;AACH,CAAC;AAED,MAAMG,MAAM,GAAGJ,UAAU,CAACZ,SAAS,CAAC;AAAC,eAEtBgB,MAAM;AAAA"}},"mtime":1667551947653},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\models\\\\users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _sequelize2 = _interopRequireDefault(require(\"sequelize\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst {\n  Model,\n  Sequelize\n} = _sequelize2.default;\nclass users extends Model {\n  static init(sequelize, DataTypes) {\n    return super.init({\n      user_id: {\n        autoIncrement: true,\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        primaryKey: true\n      },\n      user_name: {\n        type: DataTypes.STRING(50),\n        allowNull: false,\n        unique: \"users_user_name_key\"\n      },\n      user_email: {\n        type: DataTypes.STRING(50),\n        allowNull: false\n      },\n      user_password: {\n        type: DataTypes.STRING(255),\n        allowNull: false\n      },\n      user_phone: {\n        type: DataTypes.STRING(50),\n        allowNull: false,\n        unique: \"users_user_phone_key\"\n      }\n    }, {\n      sequelize,\n      tableName: 'users',\n      schema: 'public',\n      timestamps: false,\n      indexes: [{\n        name: \"users_pkey\",\n        unique: true,\n        fields: [{\n          name: \"user_id\"\n        }]\n      }, {\n        name: \"users_user_name_key\",\n        unique: true,\n        fields: [{\n          name: \"user_name\"\n        }]\n      }, {\n        name: \"users_user_phone_key\",\n        unique: true,\n        fields: [{\n          name: \"user_phone\"\n        }]\n      }]\n    });\n  }\n}\nexports.default = users;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb2RlbCIsIlNlcXVlbGl6ZSIsIl9zZXF1ZWxpemUiLCJ1c2VycyIsImluaXQiLCJzZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJ1c2VyX2lkIiwiYXV0b0luY3JlbWVudCIsInR5cGUiLCJJTlRFR0VSIiwiYWxsb3dOdWxsIiwicHJpbWFyeUtleSIsInVzZXJfbmFtZSIsIlNUUklORyIsInVuaXF1ZSIsInVzZXJfZW1haWwiLCJ1c2VyX3Bhc3N3b3JkIiwidXNlcl9waG9uZSIsInRhYmxlTmFtZSIsInNjaGVtYSIsInRpbWVzdGFtcHMiLCJpbmRleGVzIiwibmFtZSIsImZpZWxkcyJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxhZml0clxcT25lRHJpdmVcXERvY3VtZW50c1xcdGVzdG5vZGVqc1xcc2VydmVyXFxtb2RlbHNcXCIsInNvdXJjZXMiOlsidXNlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9zZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmNvbnN0IHsgTW9kZWwsIFNlcXVlbGl6ZSB9ID0gX3NlcXVlbGl6ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgdXNlcnMgZXh0ZW5kcyBNb2RlbCB7XG4gIHN0YXRpYyBpbml0KHNlcXVlbGl6ZSwgRGF0YVR5cGVzKSB7XG4gIHJldHVybiBzdXBlci5pbml0KHtcbiAgICB1c2VyX2lkOiB7XG4gICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZVxuICAgIH0sXG4gICAgdXNlcl9uYW1lOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDUwKSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICB1bmlxdWU6IFwidXNlcnNfdXNlcl9uYW1lX2tleVwiXG4gICAgfSxcbiAgICB1c2VyX2VtYWlsOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HKDUwKSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2VcbiAgICB9LFxuICAgIHVzZXJfcGFzc3dvcmQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoMjU1KSxcbiAgICAgIGFsbG93TnVsbDogZmFsc2VcbiAgICB9LFxuICAgIHVzZXJfcGhvbmU6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcoNTApLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHVuaXF1ZTogXCJ1c2Vyc191c2VyX3Bob25lX2tleVwiXG4gICAgfVxuICB9LCB7XG4gICAgc2VxdWVsaXplLFxuICAgIHRhYmxlTmFtZTogJ3VzZXJzJyxcbiAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgIGluZGV4ZXM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2Vyc19wa2V5XCIsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgeyBuYW1lOiBcInVzZXJfaWRcIiB9LFxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInVzZXJzX3VzZXJfbmFtZV9rZXlcIixcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICB7IG5hbWU6IFwidXNlcl9uYW1lXCIgfSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJ1c2Vyc191c2VyX3Bob25lX2tleVwiLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIGZpZWxkczogW1xuICAgICAgICAgIHsgbmFtZTogXCJ1c2VyX3Bob25lXCIgfSxcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICBdXG4gIH0pO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQW1DO0FBQ25DLE1BQU07RUFBRUEsS0FBSztFQUFFQztBQUFVLENBQUMsR0FBR0MsbUJBQVU7QUFFeEIsTUFBTUMsS0FBSyxTQUFTSCxLQUFLLENBQUM7RUFDdkMsT0FBT0ksSUFBSSxDQUFDQyxTQUFTLEVBQUVDLFNBQVMsRUFBRTtJQUNsQyxPQUFPLEtBQUssQ0FBQ0YsSUFBSSxDQUFDO01BQ2hCRyxPQUFPLEVBQUU7UUFDUEMsYUFBYSxFQUFFLElBQUk7UUFDbkJDLElBQUksRUFBRUgsU0FBUyxDQUFDSSxPQUFPO1FBQ3ZCQyxTQUFTLEVBQUUsS0FBSztRQUNoQkMsVUFBVSxFQUFFO01BQ2QsQ0FBQztNQUNEQyxTQUFTLEVBQUU7UUFDVEosSUFBSSxFQUFFSCxTQUFTLENBQUNRLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDMUJILFNBQVMsRUFBRSxLQUFLO1FBQ2hCSSxNQUFNLEVBQUU7TUFDVixDQUFDO01BQ0RDLFVBQVUsRUFBRTtRQUNWUCxJQUFJLEVBQUVILFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUMxQkgsU0FBUyxFQUFFO01BQ2IsQ0FBQztNQUNETSxhQUFhLEVBQUU7UUFDYlIsSUFBSSxFQUFFSCxTQUFTLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDM0JILFNBQVMsRUFBRTtNQUNiLENBQUM7TUFDRE8sVUFBVSxFQUFFO1FBQ1ZULElBQUksRUFBRUgsU0FBUyxDQUFDUSxNQUFNLENBQUMsRUFBRSxDQUFDO1FBQzFCSCxTQUFTLEVBQUUsS0FBSztRQUNoQkksTUFBTSxFQUFFO01BQ1Y7SUFDRixDQUFDLEVBQUU7TUFDRFYsU0FBUztNQUNUYyxTQUFTLEVBQUUsT0FBTztNQUNsQkMsTUFBTSxFQUFFLFFBQVE7TUFDaEJDLFVBQVUsRUFBRSxLQUFLO01BQ2pCQyxPQUFPLEVBQUUsQ0FDUDtRQUNFQyxJQUFJLEVBQUUsWUFBWTtRQUNsQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQVUsQ0FBQztNQUV2QixDQUFDLEVBQ0Q7UUFDRUEsSUFBSSxFQUFFLHFCQUFxQjtRQUMzQlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQVksQ0FBQztNQUV6QixDQUFDLEVBQ0Q7UUFDRUEsSUFBSSxFQUFFLHNCQUFzQjtRQUM1QlIsTUFBTSxFQUFFLElBQUk7UUFDWlMsTUFBTSxFQUFFLENBQ047VUFBRUQsSUFBSSxFQUFFO1FBQWEsQ0FBQztNQUUxQixDQUFDO0lBRUwsQ0FBQyxDQUFDO0VBQ0Y7QUFDRjtBQUFDIn0=","map":{"version":3,"names":["Model","Sequelize","_sequelize","users","init","sequelize","DataTypes","user_id","autoIncrement","type","INTEGER","allowNull","primaryKey","user_name","STRING","unique","user_email","user_password","user_phone","tableName","schema","timestamps","indexes","name","fields"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\models\\","sources":["users.js"],"sourcesContent":["import _sequelize from 'sequelize';\nconst { Model, Sequelize } = _sequelize;\n\nexport default class users extends Model {\n  static init(sequelize, DataTypes) {\n  return super.init({\n    user_id: {\n      autoIncrement: true,\n      type: DataTypes.INTEGER,\n      allowNull: false,\n      primaryKey: true\n    },\n    user_name: {\n      type: DataTypes.STRING(50),\n      allowNull: false,\n      unique: \"users_user_name_key\"\n    },\n    user_email: {\n      type: DataTypes.STRING(50),\n      allowNull: false\n    },\n    user_password: {\n      type: DataTypes.STRING(255),\n      allowNull: false\n    },\n    user_phone: {\n      type: DataTypes.STRING(50),\n      allowNull: false,\n      unique: \"users_user_phone_key\"\n    }\n  }, {\n    sequelize,\n    tableName: 'users',\n    schema: 'public',\n    timestamps: false,\n    indexes: [\n      {\n        name: \"users_pkey\",\n        unique: true,\n        fields: [\n          { name: \"user_id\" },\n        ]\n      },\n      {\n        name: \"users_user_name_key\",\n        unique: true,\n        fields: [\n          { name: \"user_name\" },\n        ]\n      },\n      {\n        name: \"users_user_phone_key\",\n        unique: true,\n        fields: [\n          { name: \"user_phone\" },\n        ]\n      },\n    ]\n  });\n  }\n}\n"],"mappings":";;;;;;AAAA;AAAmC;AACnC,MAAM;EAAEA,KAAK;EAAEC;AAAU,CAAC,GAAGC,mBAAU;AAExB,MAAMC,KAAK,SAASH,KAAK,CAAC;EACvC,OAAOI,IAAI,CAACC,SAAS,EAAEC,SAAS,EAAE;IAClC,OAAO,KAAK,CAACF,IAAI,CAAC;MAChBG,OAAO,EAAE;QACPC,aAAa,EAAE,IAAI;QACnBC,IAAI,EAAEH,SAAS,CAACI,OAAO;QACvBC,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC;MACDC,SAAS,EAAE;QACTJ,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,KAAK;QAChBI,MAAM,EAAE;MACV,CAAC;MACDC,UAAU,EAAE;QACVP,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE;MACb,CAAC;MACDM,aAAa,EAAE;QACbR,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,GAAG,CAAC;QAC3BH,SAAS,EAAE;MACb,CAAC;MACDO,UAAU,EAAE;QACVT,IAAI,EAAEH,SAAS,CAACQ,MAAM,CAAC,EAAE,CAAC;QAC1BH,SAAS,EAAE,KAAK;QAChBI,MAAM,EAAE;MACV;IACF,CAAC,EAAE;MACDV,SAAS;MACTc,SAAS,EAAE,OAAO;MAClBC,MAAM,EAAE,QAAQ;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,CACP;QACEC,IAAI,EAAE,YAAY;QAClBR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAU,CAAC;MAEvB,CAAC,EACD;QACEA,IAAI,EAAE,qBAAqB;QAC3BR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAY,CAAC;MAEzB,CAAC,EACD;QACEA,IAAI,EAAE,sBAAsB;QAC5BR,MAAM,EAAE,IAAI;QACZS,MAAM,EAAE,CACN;UAAED,IAAI,EAAE;QAAa,CAAC;MAE1B,CAAC;IAEL,CAAC,CAAC;EACF;AACF;AAAC"}},"mtime":1667551420334},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\IndexRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _UserRoute = _interopRequireDefault(require(\"./UserRoute\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar _default = {\n  UserRoute: _UserRoute.default\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyUm91dGUiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxccm91dGVzXFwiLCJzb3VyY2VzIjpbIkluZGV4Um91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXJSb3V0ZSBmcm9tIFwiLi9Vc2VyUm91dGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIFVzZXJSb3V0ZSxcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBb0M7QUFBQSxlQUVyQjtFQUNYQSxTQUFTLEVBQVRBO0FBQ0osQ0FBQztBQUFBIn0=","map":{"version":3,"names":["UserRoute"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\routes\\","sources":["IndexRoute.js"],"sourcesContent":["import UserRoute from \"./UserRoute\";\r\n\r\nexport default {\r\n    UserRoute,\r\n}"],"mappings":";;;;;;AAAA;AAAoC;AAAA,eAErB;EACXA,SAAS,EAATA;AACJ,CAAC;AAAA"}},"mtime":1667551006020},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\routes\\\\UserRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _authJWT = _interopRequireDefault(require(\"../helpers/authJWT\"));\nvar _IndexController = _interopRequireDefault(require(\"../controller/IndexController\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst router = (0, _express.Router)();\nrouter.get(\"/\", _IndexController.default.UserController.all);\nrouter.post(\"/signin\", _authJWT.default.authenticate, _authJWT.default.login);\nrouter.post(\"/signup\", _IndexController.default.UserController.signup);\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJnZXQiLCJJbmRleENvbnRyb2xsZXIiLCJVc2VyQ29udHJvbGxlciIsImFsbCIsInBvc3QiLCJhdXRoSldUIiwiYXV0aGVudGljYXRlIiwibG9naW4iLCJzaWdudXAiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxccm91dGVzXFwiLCJzb3VyY2VzIjpbIlVzZXJSb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgYXV0aEpXVCBmcm9tIFwiLi4vaGVscGVycy9hdXRoSldUXCI7XHJcbmltcG9ydCBJbmRleENvbnRyb2xsZXIgZnJvbSBcIi4uL2NvbnRyb2xsZXIvSW5kZXhDb250cm9sbGVyXCI7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcclxuXHJcbnJvdXRlci5nZXQoXCIvXCIsIEluZGV4Q29udHJvbGxlci5Vc2VyQ29udHJvbGxlci5hbGwpO1xyXG5yb3V0ZXIucG9zdChcIi9zaWduaW5cIiwgYXV0aEpXVC5hdXRoZW50aWNhdGUsIGF1dGhKV1QubG9naW4pO1xyXG5yb3V0ZXIucG9zdChcIi9zaWdudXBcIiwgSW5kZXhDb250cm9sbGVyLlVzZXJDb250cm9sbGVyLnNpZ251cCk7XHJcbi8vcm91dGVyLnBvc3QoXCIvcmVmcmVzaHRva2VuXCIsYXV0aEpXVC5yZWZyZXNoVG9rZW4pXHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBNEQ7QUFFNUQsTUFBTUEsTUFBTSxHQUFHLElBQUFDLGVBQU0sR0FBRTtBQUV2QkQsTUFBTSxDQUFDRSxHQUFHLENBQUMsR0FBRyxFQUFFQyx3QkFBZSxDQUFDQyxjQUFjLENBQUNDLEdBQUcsQ0FBQztBQUNuREwsTUFBTSxDQUFDTSxJQUFJLENBQUMsU0FBUyxFQUFFQyxnQkFBTyxDQUFDQyxZQUFZLEVBQUVELGdCQUFPLENBQUNFLEtBQUssQ0FBQztBQUMzRFQsTUFBTSxDQUFDTSxJQUFJLENBQUMsU0FBUyxFQUFFSCx3QkFBZSxDQUFDQyxjQUFjLENBQUNNLE1BQU0sQ0FBQztBQUM3RDtBQUFBLGVBRWVWLE1BQU07QUFBQSJ9","map":{"version":3,"names":["router","Router","get","IndexController","UserController","all","post","authJWT","authenticate","login","signup"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\routes\\","sources":["UserRoute.js"],"sourcesContent":["import { Router } from \"express\";\r\nimport authJWT from \"../helpers/authJWT\";\r\nimport IndexController from \"../controller/IndexController\";\r\n\r\nconst router = Router();\r\n\r\nrouter.get(\"/\", IndexController.UserController.all);\r\nrouter.post(\"/signin\", authJWT.authenticate, authJWT.login);\r\nrouter.post(\"/signup\", IndexController.UserController.signup);\r\n//router.post(\"/refreshtoken\",authJWT.refreshToken)\r\n\r\nexport default router;"],"mappings":";;;;;;AAAA;AACA;AACA;AAA4D;AAE5D,MAAMA,MAAM,GAAG,IAAAC,eAAM,GAAE;AAEvBD,MAAM,CAACE,GAAG,CAAC,GAAG,EAAEC,wBAAe,CAACC,cAAc,CAACC,GAAG,CAAC;AACnDL,MAAM,CAACM,IAAI,CAAC,SAAS,EAAEC,gBAAO,CAACC,YAAY,EAAED,gBAAO,CAACE,KAAK,CAAC;AAC3DT,MAAM,CAACM,IAAI,CAAC,SAAS,EAAEH,wBAAe,CAACC,cAAc,CAACM,MAAM,CAAC;AAC7D;AAAA,eAEeV,MAAM;AAAA"}},"mtime":1667554944391},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"filename\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\\\\server\\\\helpers\\\\authJWT.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\afitr\\\\OneDrive\\\\Documents\\\\testnodejs\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\nvar _initModels = _interopRequireDefault(require(\"../models/init-models\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst jwt = require('jsonwebtoken');\nconst passport = require('passport');\nconst Strategy = require('passport-local').Strategy;\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt';\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret';\nconst jwtOpts = {\n  algorithm: 'HS256',\n  expiresIn: '30d'\n};\n//passport.use(adminStrategy())\n\npassport.use(new Strategy({\n  usernameField: 'email',\n  passwordField: 'password'\n}, async function (email, password, cb) {\n  try {\n    const result = await _initModels.default.users.findOne({\n      include: [{\n        include: [{\n          model: _initModels.default.roles\n        }],\n        model: _initModels.default.user_roles\n      }],\n      where: {\n        user_email: email\n      }\n    });\n    const {\n      user_name,\n      user_id,\n      user_password,\n      user_email,\n      user_roles: [{\n        role: {\n          role_name\n        }\n      }]\n    } = result.dataValues;\n    const compare = await _bcrypt.default.compare(password, user_password);\n    if (compare) return cb(null, {\n      username: user_name,\n      userId: user_id,\n      email: user_email,\n      userRoles: role_name\n    });\n  } catch (error) {\n    return cb(null, error.message);\n  }\n  cb(null, false);\n}));\nconst authenticate = passport.authenticate('local', {\n  session: false\n});\nmodule.exports = {\n  authenticate,\n  login: login,\n  ensureAdmin: ensureAdmin,\n  ensureSeller: ensureSeller,\n  refreshToken: refreshToken\n};\nasync function login(req, res, next) {\n  const token = await sign({\n    username: req.user.username,\n    roleType: req.user.userRoles\n  });\n  const {\n    userId,\n    username,\n    email,\n    userRoles\n  } = req.user;\n  res.cookie('jwt', token, {\n    httpOnly: true\n  });\n  res.json({\n    profile: {\n      userId,\n      username,\n      email,\n      userRoles\n    },\n    success: true,\n    token: token\n  });\n}\nasync function sign(payload) {\n  const token = await jwt.sign(payload, jwtSecret, jwtOpts);\n  return token;\n}\nasync function ensureSeller(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username) {\n    req.user = payload;\n    if (req.user.roleType === 'Seller') req.isSeller = true;\n    return next();\n  }\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function ensureAdmin(req, res, next) {\n  const jwtString = req.headers.authorization || req.cookies.jwt;\n  const payload = await verify(jwtString);\n  if (payload.username === 'admin') return next();\n  const err = new Error('Unauthorized');\n  err.statusCode = 401;\n  next(err);\n}\nasync function verify(jwtString = '') {\n  jwtString = jwtString.replace(/^Bearer /i, '');\n  try {\n    const payload = await jwt.verify(jwtString, jwtSecret);\n    return payload;\n  } catch (err) {\n    err.statusCode = 401;\n    throw err;\n  }\n}\nasync function refreshToken(req, res) {\n  const {\n    refreshToken: requestToken\n  } = req.body;\n  if (requestToken == null) {\n    return res.status(403).json({\n      message: \"Refresh Token is required!\"\n    });\n  }\n  try {\n    const result = await _initModels.default.tokens.findOne({\n      where: {\n        token_id: refreshToken\n      }\n    });\n    if (!refreshToken) {\n      res.status(403).json({\n        message: \"Refresh token is not in database!\"\n      });\n      return;\n    }\n    if (result.token_expire_date.getTime() < new Date().getTime()) {\n      res.status(403).json({\n        message: \"Refresh token was expired. Please make a new signin request\"\n      });\n      return;\n    }\n    let newAccessToken = jwt.sign({\n      id: user.id\n    }, config.secret, {\n      expiresIn: config.jwtExpiration\n    });\n    return res.status(200).json({\n      accessToken: newAccessToken,\n      refreshToken: refreshToken.token\n    });\n  } catch (error) {\n    return res.status(500).send({\n      message: error\n    });\n  }\n}\n\n// function adminStrategy() {\n\n//     return new Strategy(async function (username, password, cb) {\n//         try {\n//             const result = await models.users.findOne({\n//                 where: { user_email: username }\n//             });\n\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\n//             const compare = await bcrypt.compare(password, user_password);\n\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\n//         } catch (error) {\n//             //console.log(error);\n//             return cb(null, error)\n//         }\n\n//         cb(null, false)\n//     })\n// }\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwicGFzc3BvcnQiLCJTdHJhdGVneSIsImp3dFNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiYWRtaW5QYXNzd29yZCIsIkFETUlOX1BBU1NXT1JEIiwiand0T3B0cyIsImFsZ29yaXRobSIsImV4cGlyZXNJbiIsInVzZSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwiZW1haWwiLCJwYXNzd29yZCIsImNiIiwicmVzdWx0IiwibW9kZWxzIiwidXNlcnMiLCJmaW5kT25lIiwiaW5jbHVkZSIsIm1vZGVsIiwicm9sZXMiLCJ1c2VyX3JvbGVzIiwid2hlcmUiLCJ1c2VyX2VtYWlsIiwidXNlcl9uYW1lIiwidXNlcl9pZCIsInVzZXJfcGFzc3dvcmQiLCJyb2xlIiwicm9sZV9uYW1lIiwiZGF0YVZhbHVlcyIsImNvbXBhcmUiLCJiY3J5cHQiLCJ1c2VybmFtZSIsInVzZXJJZCIsInVzZXJSb2xlcyIsImVycm9yIiwibWVzc2FnZSIsImF1dGhlbnRpY2F0ZSIsInNlc3Npb24iLCJtb2R1bGUiLCJleHBvcnRzIiwibG9naW4iLCJlbnN1cmVBZG1pbiIsImVuc3VyZVNlbGxlciIsInJlZnJlc2hUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJ0b2tlbiIsInNpZ24iLCJ1c2VyIiwicm9sZVR5cGUiLCJjb29raWUiLCJodHRwT25seSIsImpzb24iLCJwcm9maWxlIiwic3VjY2VzcyIsInBheWxvYWQiLCJqd3RTdHJpbmciLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImNvb2tpZXMiLCJ2ZXJpZnkiLCJpc1NlbGxlciIsImVyciIsIkVycm9yIiwic3RhdHVzQ29kZSIsInJlcGxhY2UiLCJyZXF1ZXN0VG9rZW4iLCJib2R5Iiwic3RhdHVzIiwidG9rZW5zIiwidG9rZW5faWQiLCJ0b2tlbl9leHBpcmVfZGF0ZSIsImdldFRpbWUiLCJEYXRlIiwibmV3QWNjZXNzVG9rZW4iLCJpZCIsImNvbmZpZyIsInNlY3JldCIsImp3dEV4cGlyYXRpb24iLCJhY2Nlc3NUb2tlbiIsInNlbmQiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcYWZpdHJcXE9uZURyaXZlXFxEb2N1bWVudHNcXHRlc3Rub2RlanNcXHNlcnZlclxcaGVscGVyc1xcIiwic291cmNlcyI6WyJhdXRoSldULmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXHJcbmNvbnN0IHBhc3Nwb3J0ID0gcmVxdWlyZSgncGFzc3BvcnQnKVxyXG5jb25zdCBTdHJhdGVneSA9IHJlcXVpcmUoJ3Bhc3Nwb3J0LWxvY2FsJykuU3RyYXRlZ3lcclxuXHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcclxuXHJcbmNvbnN0IGp3dFNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ215and0J1xyXG5jb25zdCBhZG1pblBhc3N3b3JkID0gcHJvY2Vzcy5lbnYuQURNSU5fUEFTU1dPUkQgfHwgJ3NlY3JldCdcclxuY29uc3Qgand0T3B0cyA9IHsgYWxnb3JpdGhtOiAnSFMyNTYnLCBleHBpcmVzSW46ICczMGQnIH1cclxuaW1wb3J0IG1vZGVscyBmcm9tICcuLi9tb2RlbHMvaW5pdC1tb2RlbHMnXHJcblxyXG4vL3Bhc3Nwb3J0LnVzZShhZG1pblN0cmF0ZWd5KCkpXHJcblxyXG5wYXNzcG9ydC51c2UobmV3IFN0cmF0ZWd5KHtcclxuICAgIHVzZXJuYW1lRmllbGQ6ICdlbWFpbCcsXHJcbiAgICBwYXNzd29yZEZpZWxkOiAncGFzc3dvcmQnXHJcbn0sXHJcbiAgICBhc3luYyBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkLCBjYikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVscy51c2Vycy5maW5kT25lKHtcclxuICAgICAgICAgICAgICBpbmNsdWRlOlt7aW5jbHVkZTpbe21vZGVsOm1vZGVscy5yb2xlc31dLCBtb2RlbDptb2RlbHMudXNlcl9yb2xlc31dLCAgd2hlcmU6IHsgdXNlcl9lbWFpbDogZW1haWwgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlcl9uYW1lLCB1c2VyX2lkLCB1c2VyX3Bhc3N3b3JkLCB1c2VyX2VtYWlsLHVzZXJfcm9sZXM6W3tyb2xlOntyb2xlX25hbWV9fV19ID0gcmVzdWx0LmRhdGFWYWx1ZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmUgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlcl9wYXNzd29yZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29tcGFyZSkgcmV0dXJuIGNiKG51bGwsIHsgdXNlcm5hbWU6IHVzZXJfbmFtZSwgdXNlcklkOiB1c2VyX2lkLCBlbWFpbDogdXNlcl9lbWFpbCwgdXNlclJvbGVzOiByb2xlX25hbWV9KVxyXG5cclxuXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYihudWxsLCBlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2IobnVsbCwgZmFsc2UpXHJcbiAgICB9XHJcbikpXHJcblxyXG5jb25zdCBhdXRoZW50aWNhdGUgPSBwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2xvY2FsJywgeyBzZXNzaW9uOiBmYWxzZSB9KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBhdXRoZW50aWNhdGUsXHJcbiAgICBsb2dpbjogbG9naW4sXHJcbiAgICBlbnN1cmVBZG1pbjogZW5zdXJlQWRtaW4sXHJcbiAgICBlbnN1cmVTZWxsZXI6IGVuc3VyZVNlbGxlcixcclxuICAgIHJlZnJlc2hUb2tlbiA6IHJlZnJlc2hUb2tlblxyXG59XHJcblxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ2luKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHNpZ24oeyB1c2VybmFtZTogcmVxLnVzZXIudXNlcm5hbWUsIHJvbGVUeXBlOiByZXEudXNlci51c2VyUm9sZXMgfSk7XHJcbiAgICBjb25zdCB7IHVzZXJJZCwgdXNlcm5hbWUsIGVtYWlsLCB1c2VyUm9sZXMgfSA9IHJlcS51c2VyO1xyXG4gICAgcmVzLmNvb2tpZSgnand0JywgdG9rZW4sIHsgaHR0cE9ubHk6IHRydWUgfSlcclxuXHJcbiAgICByZXMuanNvbih7IHByb2ZpbGU6IHsgdXNlcklkLCB1c2VybmFtZSwgZW1haWwsIHVzZXJSb2xlcyB9LCBzdWNjZXNzOiB0cnVlLCB0b2tlbjogdG9rZW4gfSlcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ24ocGF5bG9hZCkge1xyXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBqd3Quc2lnbihwYXlsb2FkLCBqd3RTZWNyZXQsIGp3dE9wdHMpXHJcbiAgICByZXR1cm4gdG9rZW5cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlU2VsbGVyKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCBqd3RTdHJpbmcgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uIHx8IHJlcS5jb29raWVzLmp3dFxyXG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeShqd3RTdHJpbmcpXHJcbiAgICBpZiAocGF5bG9hZC51c2VybmFtZSkge1xyXG4gICAgICAgIHJlcS51c2VyID0gcGF5bG9hZDtcclxuICAgICAgICBpZiAocmVxLnVzZXIucm9sZVR5cGUgPT09ICdTZWxsZXInKSByZXEuaXNTZWxsZXIgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdVbmF1dGhvcml6ZWQnKTtcclxuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxO1xyXG4gICAgbmV4dChlcnIpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVBZG1pbihyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgY29uc3Qgand0U3RyaW5nID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiB8fCByZXEuY29va2llcy5qd3RcclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnkoand0U3RyaW5nKVxyXG4gICAgaWYgKHBheWxvYWQudXNlcm5hbWUgPT09ICdhZG1pbicpIHJldHVybiBuZXh0KClcclxuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignVW5hdXRob3JpemVkJylcclxuICAgIGVyci5zdGF0dXNDb2RlID0gNDAxXHJcbiAgICBuZXh0KGVycilcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5KGp3dFN0cmluZyA9ICcnKSB7XHJcbiAgICBqd3RTdHJpbmcgPSBqd3RTdHJpbmcucmVwbGFjZSgvXkJlYXJlciAvaSwgJycpXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBqd3QudmVyaWZ5KGp3dFN0cmluZywgand0U2VjcmV0KVxyXG4gICAgICAgIHJldHVybiBwYXlsb2FkXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBlcnIuc3RhdHVzQ29kZSA9IDQwMVxyXG4gICAgICAgIHRocm93IGVyclxyXG4gICAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZWZyZXNoVG9rZW4ocmVxLCByZXMpIHtcclxuICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuOiByZXF1ZXN0VG9rZW4gfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIGlmIChyZXF1ZXN0VG9rZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiUmVmcmVzaCBUb2tlbiBpcyByZXF1aXJlZCFcIiB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVscy50b2tlbnMuZmluZE9uZSh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7IHRva2VuX2lkOiByZWZyZXNoVG9rZW4gfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiUmVmcmVzaCB0b2tlbiBpcyBub3QgaW4gZGF0YWJhc2UhXCIgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZXN1bHQudG9rZW5fZXhwaXJlX2RhdGUuZ2V0VGltZSgpIDwgbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJSZWZyZXNoIHRva2VuIHdhcyBleHBpcmVkLiBQbGVhc2UgbWFrZSBhIG5ldyBzaWduaW4gcmVxdWVzdFwiLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld0FjY2Vzc1Rva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5pZCB9LCBjb25maWcuc2VjcmV0LCB7XHJcbiAgICAgICAgICAgIGV4cGlyZXNJbjogY29uZmlnLmp3dEV4cGlyYXRpb24sXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IG5ld0FjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbi50b2tlbixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVycm9yIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbi8vIGZ1bmN0aW9uIGFkbWluU3RyYXRlZ3koKSB7XHJcblxyXG4vLyAgICAgcmV0dXJuIG5ldyBTdHJhdGVneShhc3luYyBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkLCBjYikge1xyXG4vLyAgICAgICAgIHRyeSB7XHJcbi8vICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVscy51c2Vycy5maW5kT25lKHtcclxuLy8gICAgICAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJfZW1haWw6IHVzZXJuYW1lIH1cclxuLy8gICAgICAgICAgICAgfSk7XHJcblxyXG4vLyAgICAgICAgICAgICBjb25zdCB7IHVzZXJfbmFtZSwgdXNlcl9pZCwgdXNlcl9wYXNzd29yZCwgdXNlcl9lbWFpbCwgdXNlcl9yb2xlX3R5cGUgfSA9IHJlc3VsdC5kYXRhVmFsdWVzO1xyXG4vLyAgICAgICAgICAgICBjb25zdCBjb21wYXJlID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXJfcGFzc3dvcmQpO1xyXG5cclxuLy8gICAgICAgICAgICAgaWYgKGNvbXBhcmUpIHJldHVybiBjYihudWxsLCB7IHVzZXJuYW1lOiB1c2VyX25hbWUsIHVzZXJJZDogdXNlcl9pZCwgZW1haWw6IHVzZXJfZW1haWwsIHJvbGVUeXBlOiB1c2VyX3JvbGVfdHlwZSB9KVxyXG4vLyAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyb3IpO1xyXG4vLyAgICAgICAgICAgICByZXR1cm4gY2IobnVsbCwgZXJyb3IpXHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBjYihudWxsLCBmYWxzZSlcclxuLy8gICAgIH0pXHJcbi8vIH0iXSwibWFwcGluZ3MiOiI7O0FBSUE7QUFLQTtBQUEwQztBQVQxQyxNQUFNQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDbkMsTUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU1FLFFB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","map":{"version":3,"names":["jwt","require","passport","Strategy","jwtSecret","process","env","JWT_SECRET","adminPassword","ADMIN_PASSWORD","jwtOpts","algorithm","expiresIn","use","usernameField","passwordField","email","password","cb","result","models","users","findOne","include","model","roles","user_roles","where","user_email","user_name","user_id","user_password","role","role_name","dataValues","compare","bcrypt","username","userId","userRoles","error","message","authenticate","session","module","exports","login","ensureAdmin","ensureSeller","refreshToken","req","res","next","token","sign","user","roleType","cookie","httpOnly","json","profile","success","payload","jwtString","headers","authorization","cookies","verify","isSeller","err","Error","statusCode","replace","requestToken","body","status","tokens","token_id","token_expire_date","getTime","Date","newAccessToken","id","config","secret","jwtExpiration","accessToken","send"],"sourceRoot":"C:\\Users\\afitr\\OneDrive\\Documents\\testnodejs\\server\\helpers\\","sources":["authJWT.js"],"sourcesContent":["const jwt = require('jsonwebtoken')\r\nconst passport = require('passport')\r\nconst Strategy = require('passport-local').Strategy\r\n\r\nimport bcrypt from 'bcrypt';\r\n\r\nconst jwtSecret = process.env.JWT_SECRET || 'myjwt'\r\nconst adminPassword = process.env.ADMIN_PASSWORD || 'secret'\r\nconst jwtOpts = { algorithm: 'HS256', expiresIn: '30d' }\r\nimport models from '../models/init-models'\r\n\r\n//passport.use(adminStrategy())\r\n\r\npassport.use(new Strategy({\r\n    usernameField: 'email',\r\n    passwordField: 'password'\r\n},\r\n    async function (email, password, cb) {\r\n        try {\r\n            const result = await models.users.findOne({\r\n              include:[{include:[{model:models.roles}], model:models.user_roles}],  where: { user_email: email }\r\n            });\r\n            \r\n            const { user_name, user_id, user_password, user_email,user_roles:[{role:{role_name}}]} = result.dataValues;\r\n            const compare = await bcrypt.compare(password, user_password);\r\n\r\n            if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, userRoles: role_name})\r\n\r\n\r\n\r\n        } catch (error) {\r\n            return cb(null, error.message)\r\n        }\r\n\r\n        cb(null, false)\r\n    }\r\n))\r\n\r\nconst authenticate = passport.authenticate('local', { session: false })\r\n\r\nmodule.exports = {\r\n    authenticate,\r\n    login: login,\r\n    ensureAdmin: ensureAdmin,\r\n    ensureSeller: ensureSeller,\r\n    refreshToken : refreshToken\r\n}\r\n\r\n\r\n\r\nasync function login(req, res, next) {\r\n    const token = await sign({ username: req.user.username, roleType: req.user.userRoles });\r\n    const { userId, username, email, userRoles } = req.user;\r\n    res.cookie('jwt', token, { httpOnly: true })\r\n\r\n    res.json({ profile: { userId, username, email, userRoles }, success: true, token: token })\r\n}\r\n\r\n\r\nasync function sign(payload) {\r\n    const token = await jwt.sign(payload, jwtSecret, jwtOpts)\r\n    return token\r\n}\r\n\r\nasync function ensureSeller(req, res, next) {\r\n    const jwtString = req.headers.authorization || req.cookies.jwt\r\n    const payload = await verify(jwtString)\r\n    if (payload.username) {\r\n        req.user = payload;\r\n        if (req.user.roleType === 'Seller') req.isSeller = true;\r\n        return next();\r\n    }\r\n\r\n    const err = new Error('Unauthorized');\r\n    err.statusCode = 401;\r\n    next(err);\r\n}\r\n\r\nasync function ensureAdmin(req, res, next) {\r\n    const jwtString = req.headers.authorization || req.cookies.jwt\r\n    const payload = await verify(jwtString)\r\n    if (payload.username === 'admin') return next()\r\n    const err = new Error('Unauthorized')\r\n    err.statusCode = 401\r\n    next(err)\r\n}\r\n\r\nasync function verify(jwtString = '') {\r\n    jwtString = jwtString.replace(/^Bearer /i, '')\r\n    try {\r\n        const payload = await jwt.verify(jwtString, jwtSecret)\r\n        return payload\r\n    } catch (err) {\r\n        err.statusCode = 401\r\n        throw err\r\n    }\r\n}\r\n\r\nasync function refreshToken(req, res) {\r\n    const { refreshToken: requestToken } = req.body;\r\n\r\n    if (requestToken == null) {\r\n        return res.status(403).json({ message: \"Refresh Token is required!\" });\r\n    }\r\n\r\n    try {\r\n        const result = await models.tokens.findOne({\r\n            where: { token_id: refreshToken }\r\n        });\r\n\r\n        if (!refreshToken) {\r\n            res.status(403).json({ message: \"Refresh token is not in database!\" });\r\n            return;\r\n        }\r\n\r\n        if (result.token_expire_date.getTime() < new Date().getTime()) {\r\n            res.status(403).json({\r\n                message: \"Refresh token was expired. Please make a new signin request\",\r\n            });\r\n            return;\r\n        }\r\n\r\n        let newAccessToken = jwt.sign({ id: user.id }, config.secret, {\r\n            expiresIn: config.jwtExpiration,\r\n          });\r\n\r\n        return res.status(200).json({\r\n            accessToken: newAccessToken,\r\n            refreshToken: refreshToken.token,\r\n        });\r\n\r\n    } catch (error) {\r\n        return res.status(500).send({ message: error });\r\n    }\r\n\r\n\r\n}\r\n\r\n// function adminStrategy() {\r\n\r\n//     return new Strategy(async function (username, password, cb) {\r\n//         try {\r\n//             const result = await models.users.findOne({\r\n//                 where: { user_email: username }\r\n//             });\r\n\r\n//             const { user_name, user_id, user_password, user_email, user_role_type } = result.dataValues;\r\n//             const compare = await bcrypt.compare(password, user_password);\r\n\r\n//             if (compare) return cb(null, { username: user_name, userId: user_id, email: user_email, roleType: user_role_type })\r\n//         } catch (error) {\r\n//             //console.log(error);\r\n//             return cb(null, error)\r\n//         }\r\n\r\n//         cb(null, false)\r\n//     })\r\n// }"],"mappings":";;AAIA;AAKA;AAA0C;AAT1C,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AACnC,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AACpC,MAAME,QAAQ,GAAGF,OAAO,CAAC,gBAAgB,CAAC,CAACE,QAAQ;AAInD,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU,IAAI,OAAO;AACnD,MAAMC,aAAa,GAAGH,OAAO,CAACC,GAAG,CAACG,cAAc,IAAI,QAAQ;AAC5D,MAAMC,OAAO,GAAG;EAAEC,SAAS,EAAE,OAAO;EAAEC,SAAS,EAAE;AAAM,CAAC;AAGxD;;AAEAV,QAAQ,CAACW,GAAG,CAAC,IAAIV,QAAQ,CAAC;EACtBW,aAAa,EAAE,OAAO;EACtBC,aAAa,EAAE;AACnB,CAAC,EACG,gBAAgBC,KAAK,EAAEC,QAAQ,EAAEC,EAAE,EAAE;EACjC,IAAI;IACA,MAAMC,MAAM,GAAG,MAAMC,mBAAM,CAACC,KAAK,CAACC,OAAO,CAAC;MACxCC,OAAO,EAAC,CAAC;QAACA,OAAO,EAAC,CAAC;UAACC,KAAK,EAACJ,mBAAM,CAACK;QAAK,CAAC,CAAC;QAAED,KAAK,EAACJ,mBAAM,CAACM;MAAU,CAAC,CAAC;MAAGC,KAAK,EAAE;QAAEC,UAAU,EAAEZ;MAAM;IACnG,CAAC,CAAC;IAEF,MAAM;MAAEa,SAAS;MAAEC,OAAO;MAAEC,aAAa;MAAEH,UAAU;MAACF,UAAU,EAAC,CAAC;QAACM,IAAI,EAAC;UAACC;QAAS;MAAC,CAAC;IAAC,CAAC,GAAGd,MAAM,CAACe,UAAU;IAC1G,MAAMC,OAAO,GAAG,MAAMC,eAAM,CAACD,OAAO,CAAClB,QAAQ,EAAEc,aAAa,CAAC;IAE7D,IAAII,OAAO,EAAE,OAAOjB,EAAE,CAAC,IAAI,EAAE;MAAEmB,QAAQ,EAAER,SAAS;MAAES,MAAM,EAAER,OAAO;MAAEd,KAAK,EAAEY,UAAU;MAAEW,SAAS,EAAEN;IAAS,CAAC,CAAC;EAIlH,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZ,OAAOtB,EAAE,CAAC,IAAI,EAAEsB,KAAK,CAACC,OAAO,CAAC;EAClC;EAEAvB,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC;AACnB,CAAC,CACJ,CAAC;AAEF,MAAMwB,YAAY,GAAGxC,QAAQ,CAACwC,YAAY,CAAC,OAAO,EAAE;EAAEC,OAAO,EAAE;AAAM,CAAC,CAAC;AAEvEC,MAAM,CAACC,OAAO,GAAG;EACbH,YAAY;EACZI,KAAK,EAAEA,KAAK;EACZC,WAAW,EAAEA,WAAW;EACxBC,YAAY,EAAEA,YAAY;EAC1BC,YAAY,EAAGA;AACnB,CAAC;AAID,eAAeH,KAAK,CAACI,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACjC,MAAMC,KAAK,GAAG,MAAMC,IAAI,CAAC;IAAEjB,QAAQ,EAAEa,GAAG,CAACK,IAAI,CAAClB,QAAQ;IAAEmB,QAAQ,EAAEN,GAAG,CAACK,IAAI,CAAChB;EAAU,CAAC,CAAC;EACvF,MAAM;IAAED,MAAM;IAAED,QAAQ;IAAErB,KAAK;IAAEuB;EAAU,CAAC,GAAGW,GAAG,CAACK,IAAI;EACvDJ,GAAG,CAACM,MAAM,CAAC,KAAK,EAAEJ,KAAK,EAAE;IAAEK,QAAQ,EAAE;EAAK,CAAC,CAAC;EAE5CP,GAAG,CAACQ,IAAI,CAAC;IAAEC,OAAO,EAAE;MAAEtB,MAAM;MAAED,QAAQ;MAAErB,KAAK;MAAEuB;IAAU,CAAC;IAAEsB,OAAO,EAAE,IAAI;IAAER,KAAK,EAAEA;EAAM,CAAC,CAAC;AAC9F;AAGA,eAAeC,IAAI,CAACQ,OAAO,EAAE;EACzB,MAAMT,KAAK,GAAG,MAAMrD,GAAG,CAACsD,IAAI,CAACQ,OAAO,EAAE1D,SAAS,EAAEM,OAAO,CAAC;EACzD,OAAO2C,KAAK;AAChB;AAEA,eAAeL,YAAY,CAACE,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACxC,MAAMW,SAAS,GAAGb,GAAG,CAACc,OAAO,CAACC,aAAa,IAAIf,GAAG,CAACgB,OAAO,CAAClE,GAAG;EAC9D,MAAM8D,OAAO,GAAG,MAAMK,MAAM,CAACJ,SAAS,CAAC;EACvC,IAAID,OAAO,CAACzB,QAAQ,EAAE;IAClBa,GAAG,CAACK,IAAI,GAAGO,OAAO;IAClB,IAAIZ,GAAG,CAACK,IAAI,CAACC,QAAQ,KAAK,QAAQ,EAAEN,GAAG,CAACkB,QAAQ,GAAG,IAAI;IACvD,OAAOhB,IAAI,EAAE;EACjB;EAEA,MAAMiB,GAAG,GAAG,IAAIC,KAAK,CAAC,cAAc,CAAC;EACrCD,GAAG,CAACE,UAAU,GAAG,GAAG;EACpBnB,IAAI,CAACiB,GAAG,CAAC;AACb;AAEA,eAAetB,WAAW,CAACG,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACvC,MAAMW,SAAS,GAAGb,GAAG,CAACc,OAAO,CAACC,aAAa,IAAIf,GAAG,CAACgB,OAAO,CAAClE,GAAG;EAC9D,MAAM8D,OAAO,GAAG,MAAMK,MAAM,CAACJ,SAAS,CAAC;EACvC,IAAID,OAAO,CAACzB,QAAQ,KAAK,OAAO,EAAE,OAAOe,IAAI,EAAE;EAC/C,MAAMiB,GAAG,GAAG,IAAIC,KAAK,CAAC,cAAc,CAAC;EACrCD,GAAG,CAACE,UAAU,GAAG,GAAG;EACpBnB,IAAI,CAACiB,GAAG,CAAC;AACb;AAEA,eAAeF,MAAM,CAACJ,SAAS,GAAG,EAAE,EAAE;EAClCA,SAAS,GAAGA,SAAS,CAACS,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;EAC9C,IAAI;IACA,MAAMV,OAAO,GAAG,MAAM9D,GAAG,CAACmE,MAAM,CAACJ,SAAS,EAAE3D,SAAS,CAAC;IACtD,OAAO0D,OAAO;EAClB,CAAC,CAAC,OAAOO,GAAG,EAAE;IACVA,GAAG,CAACE,UAAU,GAAG,GAAG;IACpB,MAAMF,GAAG;EACb;AACJ;AAEA,eAAepB,YAAY,CAACC,GAAG,EAAEC,GAAG,EAAE;EAClC,MAAM;IAAEF,YAAY,EAAEwB;EAAa,CAAC,GAAGvB,GAAG,CAACwB,IAAI;EAE/C,IAAID,YAAY,IAAI,IAAI,EAAE;IACtB,OAAOtB,GAAG,CAACwB,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;MAAElB,OAAO,EAAE;IAA6B,CAAC,CAAC;EAC1E;EAEA,IAAI;IACA,MAAMtB,MAAM,GAAG,MAAMC,mBAAM,CAACwD,MAAM,CAACtD,OAAO,CAAC;MACvCK,KAAK,EAAE;QAAEkD,QAAQ,EAAE5B;MAAa;IACpC,CAAC,CAAC;IAEF,IAAI,CAACA,YAAY,EAAE;MACfE,GAAG,CAACwB,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;QAAElB,OAAO,EAAE;MAAoC,CAAC,CAAC;MACtE;IACJ;IAEA,IAAItB,MAAM,CAAC2D,iBAAiB,CAACC,OAAO,EAAE,GAAG,IAAIC,IAAI,EAAE,CAACD,OAAO,EAAE,EAAE;MAC3D5B,GAAG,CAACwB,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;QACjBlB,OAAO,EAAE;MACb,CAAC,CAAC;MACF;IACJ;IAEA,IAAIwC,cAAc,GAAGjF,GAAG,CAACsD,IAAI,CAAC;MAAE4B,EAAE,EAAE3B,IAAI,CAAC2B;IAAG,CAAC,EAAEC,MAAM,CAACC,MAAM,EAAE;MAC1DxE,SAAS,EAAEuE,MAAM,CAACE;IACpB,CAAC,CAAC;IAEJ,OAAOlC,GAAG,CAACwB,MAAM,CAAC,GAAG,CAAC,CAAChB,IAAI,CAAC;MACxB2B,WAAW,EAAEL,cAAc;MAC3BhC,YAAY,EAAEA,YAAY,CAACI;IAC/B,CAAC,CAAC;EAEN,CAAC,CAAC,OAAOb,KAAK,EAAE;IACZ,OAAOW,GAAG,CAACwB,MAAM,CAAC,GAAG,CAAC,CAACY,IAAI,CAAC;MAAE9C,OAAO,EAAED;IAAM,CAAC,CAAC;EACnD;AAGJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA"}},"mtime":1667550059479}}